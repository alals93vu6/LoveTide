# 🔧 GamePlay場景重製操作手冊

> 全新腳本系統的物件配置與腳本對應指南

---

## 📋 操作手冊目的

本手冊用於指導GamePlay場景的重製工程，記錄了：
- 現有物件結構分析
- 新系統腳本配置方案
- 物件層級組織規劃
- Canvas分層實作指南

---

## 🔍 當前場景物件結構分析

根據提供的Hierarchy截圖，當前GamePlayScene包含以下主要物件：

### 📷 **攝影機系統**
```
📹 Main Camera
└── 負責場景渲染和UI顯示
```

### 🎨 **Canvas主體結構**
```
📱 Canvas
├── 🗺️ MapChose          - 地圖選擇系統
├── 💬 TalkObject         - 對話物件系統
│   └── 📝 Text
├── 🔲 OutingObj         - 外出物件系統  
├── ℹ️ InformationUI     - 資訊UI系統
├── 🎮 GameObject        - 通用遊戲物件
├── 🔲 OutUI             - 外出UI
├── ⚙️ ConfigureSystem   - 設定系統
├── 🎭 DirtyTricks       - 特效系統
├── 📡 EventSystem       - 事件系統
├── 🎪 PlayerActor       - 玩家演員
├── 🎮 GameManager       - 遊戲管理器
├── 🎨 GameUICtrlManager - UI控制管理器
├── ⏰ TimeManager       - 時間管理器
├── 📊 NumericalRecords  - 數值記錄
├── 📊 NumericalRecords_PlayerSetting - 玩家設定數值
├── 🎭 ActorManager      - 演員管理器
└── 📝 TextBoxManager    - 文字框管理器
```

### 🏗️ **場景物件系統**
```
🏠 SceneObject
├── 📍 0                 - 場景物件索引0
├── 🍺 Tavern           - 酒吧場景
│   └── 🍺 Interactive_Tavern
├── 🏠 Dormitories      - 宿舍場景
│   └── 🏠 Interactive_Dormitories  
├── 🏠 Interactive_Room - 房間互動
└── 💬 Talk             - 對話系統
    └── 🔲 Other
```

### 🖼️ **背景系統**
```
🎨 BackGround
├── 🖼️ BackGroundObject
├── 🖼️ Image
└── 🧪 JosnTest
```

---

## 🆕 新系統重製配置方案

### 🎨 **完整場景結構總預覽圖**

以下是重製後的完整GamePlayScene Hierarchy結構：

```
🎮 GamePlayScene (重製版完整結構)
│
├── 📹 Main Camera
│   ├── 🎵 AudioListener
│   └── 📷 CameraController.cs (可選)
│
├── 🌍 WorldSpace (世界空間物件區域)
│   ├── 🏗️ Environment (環境物件)
│   │   ├── 🏠 TavernBuilding (酒吧建築)
│   │   ├── 🏠 DormitoryBuilding (宿舍建築)
│   │   ├── 🪑 Furniture (家具物件)
│   │   └── 💡 Lighting (光照系統)
│   │
│   ├── 🎭 Characters (角色物件)
│   │   ├── 👩 Yuka (Spine角色)
│   │   │   ├── 🦴 SkeletonAnimation
│   │   │   ├── 🎭 ActorManagerTest.cs
│   │   │   └── 🚶‍♀️ CharacterMovement.cs
│   │   │
│   │   └── 🐱 Cat (貓咪物件)
│   │       ├── 🖼️ SpriteRenderer
│   │       └── 🐾 CatBehavior.cs
│   │
│   └── 🎨 BackgroundObjects (背景物件)
│       ├── 🖼️ TavernBackground
│       ├── 🖼️ DormitoryBackground
│       └── 🌅 EnvironmentalEffects
│
├── 🎮 CoreManagers (核心管理器區域)
│   ├── 🎯 NewGameManager 🆕
│   │   ├── NewGameManager.cs
│   │   ├── SceneStateManager.cs
│   │   └── GameDataManager.cs
│   │
│   ├── 🎪 InteractionManager 🆕
│   │   ├── InteractionManager.cs
│   │   ├── InteractionConditionChecker.cs
│   │   └── InteractionResultProcessor.cs
│   │
│   ├── ⏰ TimeManager (保留)
│   │   └── TimeManagerTest.cs
│   │
│   ├── 📊 NumericalRecords (保留)
│   │   └── NumericalRecords.cs
│   │
│   ├── 📊 NumericalRecords_PlayerSetting (保留)
│   │   └── NumericalRecords_PlayerSetting.cs
│   │
│   └── 📡 EventSystem (保留)
│       └── EventSystem (Unity預設)
│
└── 🎨 UISystem (UI系統區域 - Canvas層級)
    │
    ├── 🖼️ BackgroundCanvas (Order: 0)
    │   ├── 🎨 NewUIManager 🆕
    │   │   ├── NewUIManager.cs
    │   │   ├── CanvasLayerManager.cs
    │   │   └── UIAnimationController.cs
    │   │
    │   ├── 🖼️ BackGroundObject (從原BackGround移動)
    │   ├── 🖼️ SceneBackground (新增)
    │   └── 🎭 EnvironmentEffects (新增)
    │
    ├── 🏠 StaticInteractionCanvas (Order: 40) 🆕
    │   ├── 🎯 StaticObjectInteraction (主控制器)
    │   │   ├── StaticObjectInteraction.cs
    │   │   ├── WorkSceneInteraction.cs
    │   │   ├── DormSceneInteraction.cs
    │   │   └── SceneObjectManager.cs
    │   │
    │   ├── 🍺 TavernInteractionButton (工作場景)
    │   │   ├── Button (UI Component)
    │   │   └── TavernInteractionHandler.cs
    │   │
    │   ├── 🐱 CatInteractionButton (和貓互動)
    │   │   ├── Button (UI Component)
    │   │   └── CatInteractionHandler.cs
    │   │
    │   ├── 🚪 ExitButton (外出系統)
    │   │   ├── Button (UI Component)
    │   │   └── ExitInteractionHandler.cs
    │   │
    │   ├── 🏠 DormInteractionButton (宿舍場景)
    │   │   ├── Button (UI Component)
    │   │   └── DormInteractionHandler.cs
    │   │
    │   └── 🍷 DrinkingInviteButton (邀請喝酒)
    │       ├── Button (UI Component)
    │       └── DrinkingInteractionHandler.cs
    │
    ├── 🎪 DynamicCharacterCanvas (Order: 50) 🆕
    │   ├── 🎯 DynamicCharacterInteraction (主控制器)
    │   │   ├── DynamicCharacterInteraction.cs
    │   │   ├── CharacterFollowButton.cs
    │   │   ├── YukaInteractionController.cs
    │   │   └── CharacterInteractionFeedback.cs
    │   │
    │   ├── 👩 YukaInteractionButton (透明跟隨Button)
    │   │   ├── Button (UI Component)
    │   │   ├── RectTransform (位置跟隨)
    │   │   └── Image (透明背景)
    │   │
    │   ├── ✨ CharacterHoverEffect (角色Hover效果)
    │   │   ├── Image (UI Component)
    │   │   └── HoverEffectController.cs
    │   │
    │   └── 🎯 InteractionIndicator (互動指示器)
    │       ├── Image (UI Component)
    │       └── IndicatorAnimationController.cs
    │
    ├── 🎮 GameUICanvas (Order: 60)<待更改>
    │   ├── ⏰ TimeDisplay (時間顯示)
    │   │   ├── Text (UI Component)
    │   │   └── TimeDisplayController.cs
    │   │
    │   ├── 💰 StatusDisplay (狀態顯示)
    │   │   ├── Text/Image (UI Components)
    │   │   └── StatusDisplayController.cs
    │   │
    │   ├── ⚙️ SettingsButton (設定按鈕)
    │   │   ├── Button (UI Component)
    │   │   └── SettingsButtonHandler.cs
    │   │
    │   └── ℹ️ InformationUI (資訊UI，從原Canvas移動)
    │       ├── InformationUI_ClickObject.cs (保留)
    │       └── Related UI Components
    │
    ├── 💬 DialogCanvas (Order: 70)
    │   ├── 💬 TalkObject (從原Canvas移動)
    │   │   ├── Text (UI Component)
    │   │   └── Related Scripts (保留)
    │   │
    │   ├── 📝 TextBoxManager (從原位置移動)
    │   │   ├── TextBoxTestPlaying.cs (保留)
    │   │   └── Related UI Components
    │   │
    │   ├── 🔲 DialogChoicePanel (新增)
    │   │   ├── DialogChoiceManager.cs
    │   │   └── Choice Buttons
    │   │
    │   └── 🔗 DialogIntegrationBridge (新增)
    │       └── DialogIntegrationBridge.cs
    │
    ├── 📋 MenuCanvas (Order: 80)
    │   ├── ⚙️ ConfigureSystem (從原Canvas移動)
    │   │   ├── ConfigureSystem Scripts (保留)
    │   │   └── Settings UI Panels
    │   │
    │   ├── 🗺️ MapChose (從原Canvas移動)
    │   │   ├── MapChose Scripts (保留)
    │   │   └── Map UI Components
    │   │
    │   ├── 🔲 OutingPanel (重組OutingObj)
    │   │   ├── OutingPanelController.cs
    │   │   └── Outing UI Components
    │   │
    │   └── 🔲 OutUI (從原位置移動)
    │       └── Related Components (保留)
    │
    └── 🚨 PopupCanvas (Order: 90)
        ├── 🎭 DirtyTricks (從原Canvas移動)
        │   ├── DirtyTrickCtrl.cs (保留)
        │   └── Transition Effects
        │
        ├── 💾 SaveLoadPanel (新增)
        │   ├── SaveLoadController.cs
        │   └── Save/Load UI Components
        │
        └── ⚠️ ConfirmationDialog (新增)
            ├── ConfirmationDialogController.cs
            └── Confirmation UI Components
```

### 🎯 **兩大場景 × 兩種模式設計**

根據實際需求分析，遊戲包含:
- **🍺 餐廳場景** + **🏠 宿舍場景** (兩大場景)
- **🌍 Q版全景互動** + **🎭 角色對話模式** (兩種互動)

#### 🌍 **Q版全景互動模式**
```
場景特色:
├── 👩 小Yuka在場景中走動 (簡化動畫: 4種組合)
├── 🎯 可點擊的互動物件 (工作、貓咪、外出等)
├── 🚪 場景切換功能 (餐廳⇄宿舍)
└── 🎭 進入角色對話模式入口

技術實現:
├── DynamicCharacterCanvas: 小Yuka + 互動檢測
├── StaticInteractionCanvas: 靜態物件互動按鈕
└── BackgroundCanvas: 場景背景和視覺元素
```

#### 🎭 **角色對話互動模式**
```
互動特色:
├── 📋 左側動作選項選單 (對話、外出、特殊互動等)
├── 👩 右側Yuka完整立繪 (四軌道表情 + 多區域點擊)
├── 🔊 語音回饋系統 (點擊部位→對應語音)
└── ↩️ 返回場景總覽功能

技術實現:
├── MenuCanvas: 主要互動介面容器
├── DialogCanvas: 對話文字和語音播放
└── PopupCanvas: 特殊互動和成人內容
```

### 🎯 **層級結構說明**

#### 🌍 **WorldSpace區域** (純環境視覺)
- **環境建築物件** - 酒吧、宿舍建築視覺
- **背景裝飾物件** - 家具、燈光、氛圍物件
- **⚠️ 重要**: 角色系統改用Canvas + SkeletonGraphic實現

#### 🎨 **UISystem區域** (Canvas分層)
- **7層Canvas架構** - 清晰的UI層級管理
- **互動檢測分離** - 靜態與動態互動完全分開
- **視覺效果集中** - 所有UI效果統一管理

#### 🎮 **CoreManagers區域** (邏輯管理)
- **新舊系統共存** - 保留穩定組件，新增必要功能
- **統一協調** - 所有管理器在同一層級便於引用
- **事件驅動** - 各系統間通過事件通信

---

## 🎯 腳本配置方案

### 🏗️ **核心管理器架構**

#### 🎮 **新版GameManager**
```csharp
// 新增：NewGameManager.cs
物件位置: GamePlayScene Root
腳本配置:
├── NewGameManager.cs (主控制器) 🆕
├── SceneStateManager.cs (場景狀態管理) 🆕
└── GameDataManager.cs (遊戲數據管理) 🆕

功能說明:
- 替代原有GameManager，使用全新架構
- 管理遊戲狀態、場景切換、數據同步
- 與時間系統、數值系統、演員系統協調
```

#### 🎨 **新版UI管理器**
```csharp
// 新增：NewUIManager.cs  
物件位置: GameUICanvas
腳本配置:
├── NewUIManager.cs (UI總控制器) 🆕
├── CanvasLayerManager.cs (Canvas分層管理) 🆕
└── UIAnimationController.cs (UI動畫控制) 🆕

功能說明:
- 管理7層Canvas的顯示和隱藏
- 控制UI動畫和轉場效果
- 替代原有GameUICtrlManager
```

### 🎪 **互動系統腳本配置**

#### 🎯 **主要互動管理器**
```csharp
// 新增：InteractionManager.cs
物件位置: GamePlayScene Root
腳本配置:
├── InteractionManager.cs (互動統一管理) 🆕
├── InteractionConditionChecker.cs (條件檢查) 🆕
└── InteractionResultProcessor.cs (結果處理) 🆕

功能說明:
- 統一管理所有互動系統
- 檢查互動解鎖條件
- 處理互動結果和數值變化
```

#### 👩 **動態角色互動**
```csharp
// 新增：DynamicCharacterInteraction.cs
物件位置: DynamicCharacterCanvas
腳本配置:
├── DynamicCharacterInteraction.cs (主控制器) 🆕
├── CharacterFollowButton.cs (Button跟隨邏輯) 🆕
├── YukaInteractionController.cs (由香專用控制器) 🆕
└── CharacterInteractionFeedback.cs (視覺反饋) 🆕

目標物件:
├── YukaInteractionButton (Button組件)
├── YukaHoverEffect (視覺效果)
└── InteractionIndicator (互動指示器)

功能說明:
- 透明Button跟隨由香Spine角色移動
- World Space ↔ Screen Space 座標轉換
- Hover和點擊視覺反饋
- 顯示由香對話選單
```

#### 🏠 **靜態物件互動**
```csharp
// 新增：StaticObjectInteraction.cs
物件位置: StaticInteractionCanvas
腳本配置:
├── StaticObjectInteraction.cs (主控制器) 🆕
├── WorkSceneInteraction.cs (工作場景互動) 🆕
├── DormSceneInteraction.cs (宿舍場景互動) 🆕
└── SceneObjectManager.cs (場景物件管理) 🆕

目標物件配置:
├── TavernInteractionButton (幫忙工作) - Button + TavernInteractionHandler.cs
├── CatInteractionButton (和貓互動) - Button + CatInteractionHandler.cs
├── ExitButton (外出系統) - Button + ExitInteractionHandler.cs
├── DormInteractionButton (宿舍互動) - Button + DormInteractionHandler.cs
└── DrinkingInviteButton (邀請喝酒) - Button + DrinkingInteractionHandler.cs

功能說明:
- 管理所有靜態場景物件互動
- 根據時間和場景狀態啟用/禁用按鈕
- 處理工作、貓咪、外出、喝酒等互動
```

### 📊 **保留與整合的現有系統**

#### ⏰ **時間系統 (保留)**
```csharp
// 保留：TimeManager
物件位置: GamePlayScene Root (保持原位)
腳本配置: TimeManagerTest.cs (保留不變)

整合說明:
- 保持現有時間管理邏輯
- 新增事件通知給InteractionManager
- 確保與新系統的狀態同步
```

#### 📊 **數值系統 (保留)**
```csharp
// 保留：NumericalRecords
物件位置: GamePlayScene Root (保持原位)
腳本配置:
├── NumericalRecords.cs (保留不變)
└── NumericalRecords_PlayerSetting.cs (保留不變)

整合說明:
- 保持現有數值管理邏輯
- 新增API給InteractionManager調用
- 確保數值變化事件通知新系統
```

#### 🎭 **演員系統 (保留)**
```csharp
// 保留：ActorManager  
物件位置: GamePlayScene Root (保持原位)
腳本配置: ActorManagerTest.cs (保留不變)

整合說明:
- 保持現有演員控制邏輯
- 新增由香位置資訊給DynamicCharacterInteraction
- 確保表情和動畫與新互動系統同步
```

#### 💬 **對話系統 (移動+增強)**
```csharp
// 移動：TextBoxManager
物件位置: DialogCanvas (從原位移動)
腳本配置:
├── TextBoxManager.cs (保留，輕微修改) 
├── DialogChoiceManager.cs (新增) 🆕
└── DialogIntegrationBridge.cs (新增) 🆕

功能說明:
- 移動到DialogCanvas層級
- 新增對話選擇功能
- 整合新互動系統的對話觸發
```

---

## 🔧 物件配置操作步驟

### 📋 **階段一：Canvas分層重構**

#### 🎯 **步驟1：創建新Canvas層級** (Order設定確認)
**📝 重要提醒**: 根據實際操作確認，**Order in Layer** 就是控制Canvas分層的正確欄位
```
操作步驟:
1. 創建BackgroundCanvas (Order: 0)
2. 創建StaticInteractionCanvas (Order: 40)  
3. 創建DynamicCharacterCanvas (Order: 50)
4. 創建GameUICanvas (Order: 60)
5. 創建DialogCanvas (Order: 70)
6. 創建MenuCanvas (Order: 80)
7. 創建PopupCanvas (Order: 90)

Canvas設定:
- Render Mode: Screen Space - Camera ✅ (實際驗證正確)
- Pixel Perfect: True
- Order in Layer: 按上述順序設定 ✅ (0, 40, 50, 60, 70, 80, 90)
- Canvas Scaler: Scale With Screen Size (RWD響應式設計)
- Sorting Layer: Default
```

#### 🎯 **步驟2：分離視覺與互動物件** ⚠️ 關鍵步驟
```
🎯 分離原則 (基於實際場景分析):
1. 視覺物件 → WorldSpace/Environment/
   ├── Tavern 建築視覺 → TavernBuilding/
   ├── Dormitories 建築視覺 → DormitoryBuilding/ 
   └── 家具、裝飾等 → Furniture/

2. 互動UI選單 → 對應Canvas層級
   ├── Interactive_Tavern UI選單 → MenuCanvas/TavernInteractionMenu/
   ├── flirt_Talk → DialogCanvas/TavernDialogPanel/
   ├── 成人內容選項 → PopupCanvas/AdultContentPanel/
   └── 其他互動選單 → 對應Canvas

3. 既有UI系統 → 對應Canvas層級  
   ├── BackGroundObject → BackgroundCanvas
   ├── InformationUI → GameUICanvas
   ├── TalkObject → DialogCanvas
   ├── TextBoxManager → DialogCanvas
   ├── ConfigureSystem → MenuCanvas
   ├── MapChose → MenuCanvas
   └── DirtyTricks → PopupCanvas
```

### 📋 **階段二：創建Canvas角色系統**

#### 🎪 **場景角色系統創建** ✨新設計
```
DynamicCharacterCanvas下創建:

1. SmallYuka (Q版場景角色) ✨移植現有邏輯
   - 物件類型: SkeletonGraphic (取代SkeletonAnimation)
   - 腳本配置:
     ├── SceneCharacterController.cs (整合Yuka Manager邏輯)
     ├── UICharacterMovement.cs (修改版CharacterMovement.cs)
     ├── ActorManagerTest.cs (直接移植，無需修改)
     └── Button + EventTrigger (取代Collider + Click/Mouse腳本)
   - 動畫設定: 4種組合 (idle/walk × 正常/開心表情)
   - 互動方式: UI Button.onClick (取代OnMouseDown)
   - 功能: 場景漫遊 + 進入對話模式
   - 移植優勢: 保留85%現有邏輯，僅修改輸入和座標系統

2. CatInteractionArea (貓咪互動區域)
   - 物件類型: Image + Button (UI)
   - 腳本: CatInteractionHandler.cs
   - 位置: 固定在貓咪出現位置
   - 功能: 釣魚→餵食→嚕貓連動系統

3. SceneEffects (場景特效)
   - 物件類型: Image (UI)
   - 腳本: HoverEffectController.cs
   - 功能: 互動指示器和視覺反饋
```

#### 🎭 **對話角色系統創建** ✨核心功能
```
MenuCanvas下創建:

1. FullYuka (完整互動立繪)
   - 物件類型: SkeletonGraphic (四軌道表情系統)
   - 腳本: CharacterInteractionPanel.cs
   - 表情控制: 整合ActorManagerTest.cs邏輯
   - Button組件: MultiAreaButton (多區域點擊檢測)
   - 功能: 語音互動 + 表情變化

2. ActionSelectionMenu (左側動作選單)
   - TalkButton (對話選項)
   - ExitButton (外出選項) 
   - SpecialActionButton (特殊互動)
   - ReturnButton (返回場景)

3. VoicePlaybackSystem (語音播放系統)
   - AudioSource (語音播放)
   - 腳本: VoiceFeedbackController.cs
   - 功能: 點擊部位→對應語音回饋
```

#### 🎯 **靜態場景互動創建**
```
StaticInteractionCanvas下創建:

1. TavernWorkButton (餐廳工作)
   - 物件類型: Button (UI)
   - 腳本: TavernInteractionHandler.cs
   - 位置: 酒吧工作區域
   - 功能: 工作賺錢系統

2. DormRestButton (宿舍休息)
   - 物件類型: Button (UI)
   - 腳本: DormInteractionHandler.cs
   - 位置: 宿舍休息區域
   - 功能: 休息回復系統

3. SceneTransitionButton (場景切換)
   - 物件類型: Button (UI)
   - 腳本: SceneTransitionHandler.cs
   - 位置: 門口/通道位置
   - 功能: 餐廳↔宿舍切換
```

### 📋 **階段三：腳本配置與綁定**

#### 🎯 **主要管理器配置**
```
GamePlayScene Root下創建:

1. NewGameManager (空物件)
   - 添加腳本: NewGameManager.cs
   - 引用設定: TimeManager, NumericalRecords, ActorManager
   - 引用設定: InteractionManager, NewUIManager

2. InteractionManager (空物件)  
   - 添加腳本: InteractionManager.cs
   - 引用設定: DynamicCharacterInteraction, StaticObjectInteraction
   - Canvas引用: DynamicCharacterCanvas, StaticInteractionCanvas
```

#### 🎯 **UI管理器配置**
```
GameUICanvas下創建:

1. NewUIManager (空物件)
   - 添加腳本: NewUIManager.cs
   - Canvas引用: 所有7層Canvas
   - 組件引用: 各UI面板和控制器
```

### 📋 **階段四：引用綁定檢查清單**

#### ✅ **必要引用綁定**
```
NewGameManager.cs 需要綁定:
├── TimeManagerTest (現有)
├── NumericalRecords (現有)  
├── ActorManagerTest (現有)
├── InteractionManager (新增)
├── NewUIManager (新增)
└── SceneStateManager (新增)

InteractionManager.cs 需要綁定:
├── DynamicCharacterInteraction (新增)
├── StaticObjectInteraction (新增)
├── DynamicCharacterCanvas (新增)
├── StaticInteractionCanvas (新增)
└── InteractionConditionChecker (新增)

SceneInteractionController.cs 需要綁定:
├── SmallYuka (SkeletonGraphic組件)
├── CatInteractionArea (UI Button)
├── SceneEffects (視覺反饋)
└── SceneModeManager (模式切換控制器)

CharacterInteractionPanel.cs 需要綁定:
├── FullYuka (SkeletonGraphic組件)
├── ActionSelectionMenu (動作選單)
├── VoicePlaybackSystem (語音系統)
└── ActorManagerTest (表情控制整合)

StaticObjectInteraction.cs 需要綁定:
├── TavernInteractionButton (新增)
├── CatInteractionButton (新增)
├── ExitButton (新增)
└── DrinkingInviteButton (新增)
```

---

## 🔄 舊系統物件遷移策略

### 📋 **遷移原則說明**

基於實際場景分析，舊系統採用**場景物件 + Collider + OnClick**的互動方式，新系統改用**視覺物件 + Canvas Button**的分離架構。

#### 🎯 **核心分離概念**
```
🔄 舊系統 → 新系統轉換:

舊: SceneObject/Interactive_* (視覺+互動融合)
 ↓
新: WorldSpace/Environment/* (純視覺) + Canvas/Button (純互動)
```

### 🏠 **具體物件遷移對照表**

#### 🍺 **Tavern 酒吧系統**
```
📦 SceneObject/Tavern/
├── 🖼️ 視覺物件 (建築、家具、裝飾)
│   → 移動到: WorldSpace/Environment/TavernBuilding/
│   → 保留: 酒吧背景、酒櫃、桌椅等所有視覺元素
│
├── 🎮 Interactive_Tavern/ (互動選單UI)
│   ├── flirt_Talk → DialogCanvas/TavernDialogPanel/
│   ├── flirt_Chests, flirt_Ass1, flirt_Ass2, flirt_genitals
│   │   → PopupCanvas/AdultContentPanel/
│   ├── "外出" 按鈕 → MenuCanvas/TavernInteractionMenu/
│   ├── "返回" 按鈕 → MenuCanvas/TavernInteractionMenu/
│   └── 隱藏功能按鈕 → MenuCanvas/TavernInteractionMenu/
│
└── 🗑️ 刪除互動組件:
    ├── Collider 組件 → 改用 Canvas Button 檢測
    ├── OnClick 事件腳本 → 改用 UI Button.onClick
    └── Job1, GoOut, Chats 等物件 → 改用對應 Canvas Button
```

#### 🏠 **Dormitories 宿舍系統**
```
📦 SceneObject/Dormitories/
├── 🖼️ 視覺物件 (建築、房間、家具)
│   → 移動到: WorldSpace/Environment/DormitoryBuilding/
│
├── 🎮 Interactive_Dormitories/ (互動功能)
│   → 重新設計為: StaticInteractionCanvas/DormInteractionButton/
│
└── 🗑️ 刪除: Collider + OnClick 互動組件
```

#### 🎭 **角色系統特殊處理**
```
📦 SceneObject/Tavern/Yuka
├── 🎭 Spine 角色動畫
│   → 移動到: WorldSpace/Characters/Yuka/
│   → 保留: SkeletonAnimation + ActorManagerTest.cs
│
└── 🎮 角色互動觸發
    → 改用: DynamicCharacterCanvas/YukaInteractionButton/
    → 功能: 透明Button跟隨角色移動實現互動檢測
```

#### 💬 **對話系統整合**
```
📦 SceneObject/Talk/
├── 📝 對話核心功能
│   → 移動到: DialogCanvas/TalkSystem/
│   → 整合: TextBoxManager + 新對話選擇功能
│
└── 🔗 與互動系統整合
    → 統一由 InteractionManager 觸發對話
```

### ⚠️ **遷移注意事項**

#### 🔒 **安全遷移原則**
```
重要提醒:
1. ✅ 先移動視覺物件，確認顯示正常
2. ✅ 再創建新的 Canvas Button 互動
3. ✅ 測試新互動功能正常後，才刪除舊互動組件
4. ✅ 保持 Interactive_* 物件直到新系統完全驗證
5. ⚠️ 注意: 不要直接刪除整個 SceneObject，先分離視覺和互動部分
```

#### 🎯 **關鍵檢查點**
```
每個物件遷移後檢查:
1. ✅ 視覺物件在 WorldSpace 正常顯示
2. ✅ 對應的 Canvas Button 已創建
3. ✅ 新互動功能可以正常觸發
4. ✅ 舊 Collider + OnClick 已安全移除
5. ✅ 相關腳本引用已更新
```

---

## ⚠️ 注意事項與檢查點

### 🔒 **安全措施**
```
重製前準備:
1. ✅ 確認GamePlayScene_old.unity備份存在
2. ✅ 提交當前版本到版本控制
3. ✅ 準備回滾計劃
4. ✅ 測試環境準備就緒
```

### 🎯 **關鍵檢查點**
```
每個階段完成後檢查:
1. ✅ Canvas分層Order設定正確
2. ✅ 物件層級結構清晰
3. ✅ 腳本引用綁定完整
4. ✅ 基礎功能測試通過
5. ✅ 無編譯錯誤
6. ✅ 場景可正常載入
```

### 🎮 **測試驗證**
```
功能測試清單:
1. ✅ 場景正常載入和顯示
2. ✅ 時間系統正常運作
3. ✅ 數值系統正常記錄  
4. ✅ 演員系統正常顯示
5. ✅ UI層級顯示正確
6. ✅ 基礎互動可以觸發
7. ✅ 對話系統正常工作
```

---

## 📁 相關文檔引用

### 📑 **架構設計文檔**
- `docs/Architecture/NurturingMode/養成遊戲流程.md`
- `docs/Architecture/NurturingMode/養成UI系統.md`
- `docs/Architecture/NurturingMode/互動系統完整設計_重製版.md`

### 📋 **工程記錄**
- `docs/ProjectLogs/2025-08-17_GamePlay場景重製工程啟動日誌.md`
- `docs/project_memory.md`

### 🎯 **實機參考**
- `docs/實機畫面/養成模式*.png`

---

**手冊版本**: 1.3 📋 **腳本移植完整版**  
**創建日期**: 2025-08-17  
**最後更新**: 2025-08-19  
**適用範圍**: GamePlay場景全面重製工程  
**維護者**: 開發團隊 + Claude Code  
**重大更新**: 
- ✨ 確認角色系統採用Canvas + SkeletonGraphic架構
- 🎪 明確兩大場景×兩種互動模式的完整設計
- 🎭 角色分離: Q版小Yuka(簡化) + 完整Yuka立繪(四軌道)
- 🔧 技術統一: 完全移除透明Button跟隨的複雜實現
- 📋 現有腳本分析: 85%代碼可重用，提供詳細移植指導
- 🛠️ 具體修改方案: CharacterMovement.cs等關鍵腳本的修改要點
- 💡 移植策略: 基於實際腳本結構的完整轉換指南

> 🔧 **操作手冊核心**: 本手冊提供了從現有物件結構到新系統架構的完整轉換指南，確保重製工程的順利進行和品質控制！