# â° TimeManagerTest æ™‚é–“ç®¡ç†ç³»çµ±

> LoveTide éŠæˆ²çš„æ ¸å¿ƒæ™‚é–“æ§åˆ¶ç³»çµ±ï¼Œè² è²¬ç®¡ç†éŠæˆ²å…§æ™‚é–“æµç¨‹ã€äº‹ä»¶è§¸ç™¼å’Œæ™‚é–“ç‹€æ…‹åˆ¤æ–·

---

## ğŸ¯ æ¦‚è¿°

TimeManagerTest æ˜¯éŠæˆ²çš„æ™‚é–“ç®¡ç†æ ¸å¿ƒï¼Œé€é `NumericalRecords` ç®¡ç†ä¸‰å€‹é—œéµæ™‚é–“è®Šæ•¸ï¼Œé©…å‹•æ•´å€‹éŠæˆ²çš„æ™‚é–“æµç¨‹å’Œäº‹ä»¶è§¸ç™¼æ©Ÿåˆ¶ã€‚

---

## ğŸ“ æª”æ¡ˆä½ç½®

```
E:\GitHub\LoveTide\LoveTide\Assets\Scripts\GamePlay\TimeManagerTest.cs
```

---

## ğŸ§± æ ¸å¿ƒæ¶æ§‹

### ğŸ“Š æ™‚é–“è®Šæ•¸é«”ç³»
```csharp
[SerializeField] private NumericalRecords numberCtrl;
[SerializeField] public bool vacation;
```

#### ğŸ• æ ¸å¿ƒæ™‚é–“è®Šæ•¸ï¼ˆç”± NumericalRecords ç®¡ç†ï¼‰
- **`aDay`**: éŠæˆ²ç¸½å¤©æ•¸ï¼ˆç„¡é™ç´¯åŠ ï¼‰
- **`aTimer`**: æ™‚æ®µï¼ˆ1-10ï¼Œ1-6ç™½å¤©ï¼Œ7-10æ™šä¸Šï¼‰
- **`aWeek`**: æ˜ŸæœŸï¼ˆ1-7ï¼Œ3-4ç‚ºé€±æœ«å‡æœŸï¼‰

#### ğŸ–ï¸ ç‹€æ…‹æ¨™èªŒ
- **`vacation`**: å‡æœŸç‹€æ…‹ï¼ˆé€±æœ«æˆ–æ™šä¸Šï¼‰

---

## ğŸ”§ æ ¸å¿ƒæ–¹æ³•

### ğŸ“… DetectedDayPassed()
```csharp
public void DetectedDayPassed()
{
    if (numberCtrl.aWeek >= 7) {
        numberCtrl.aWeek = 1;
    } else {
        numberCtrl.aWeek++;
    }
    numberCtrl.aTimer = 1;
    numberCtrl.aDay++;
    VacationDetected();
}
```

**åŠŸèƒ½**: è™•ç†æ—¥æœŸæ¨é€²é‚è¼¯
- é€±æ•¸å¾ªç’°ï¼ˆ7â†’1ï¼‰
- é‡ç½®æ™‚æ®µç‚ºæ—©ä¸Šç¬¬ä¸€å€‹æ™‚æ®µ
- å¤©æ•¸ç´¯åŠ 
- è§¸ç™¼å‡æœŸç‹€æ…‹æª¢æŸ¥

**å‘¼å«ä½ç½®**:
- `GameManagerTest.cs` ç¬¬141è¡Œï¼š`timer.DetectedDayPassed();`
- åœ¨ `DayPassedEvent()` æ–¹æ³•ä¸­è§¸ç™¼

### ğŸ–ï¸ VacationDetected()
```csharp
public void VacationDetected()
{
    if (numberCtrl.aWeek == 3 || numberCtrl.aWeek == 4)
    {
        vacation = true;
    }
    else
    {
        vacation = false;
    }
}
```

**åŠŸèƒ½**: æ ¹æ“šæ˜ŸæœŸåˆ¤æ–·å‡æœŸç‹€æ…‹
- é€±ä¸‰ã€é€±å››ç‚ºå‡æœŸï¼ˆé€±æœ«ï¼‰
- è¨­å®š `vacation` ç‹€æ…‹æ¨™èªŒ

**å‘¼å«ä½ç½®**:
- `GameManagerTest.cs` ç¬¬72è¡Œï¼š`timer.VacationDetected();`
- éŠæˆ²é–‹å§‹æ™‚æª¢æŸ¥ç•¶å‰å‡æœŸç‹€æ…‹

### ğŸŒ™ DetectedPeriod()
```csharp
public void DetectedPeriod()
{
    if (numberCtrl.aTimer >= 7)
    {
        vacation = true;
    }
    else
    {
        vacation = false;
    }
}
```

**åŠŸèƒ½**: æ ¹æ“šæ™‚æ®µåˆ¤æ–·å‡æœŸç‹€æ…‹
- æ™‚æ®µ >= 7 è¦–ç‚ºæ™šä¸Šï¼ˆå‡æœŸç‹€æ…‹ï¼‰
- å‹•æ…‹è¨­å®š `vacation` ç‹€æ…‹

**ä½¿ç”¨ç‹€æ³**: æ–¹æ³•å·²å®šç¾©ä½†ç›®å‰æœªåœ¨å°ˆæ¡ˆä¸­è¢«å‘¼å«

---

## ğŸ”„ æ™‚é–“ç³»çµ±é‚è¼¯

### ğŸ“ˆ æ™‚é–“æ¨é€²æµç¨‹
```
æ™‚æ®µæ¨é€² â†’ æª¢æŸ¥æ™‚æ®µ â†’ è§¸ç™¼äº‹ä»¶ â†’ æ™‚æ®µ >= 10 â†’ æ—¥æœŸæ¨é€²
    â†“           â†“           â†“              â†“
æ™‚æ®µ += 1   å‡æœŸåˆ¤æ–·   åŠ‡æƒ…è§¸ç™¼      é‡ç½®æ™‚æ®µç‚º1
```

### ğŸ¯ äº‹ä»¶è§¸ç™¼æ©Ÿåˆ¶
```csharp
// GameManagerTest.cs ä¸­çš„äº‹ä»¶è§¸ç™¼é‚è¼¯
if (timemanager.aTimer >= 10)
{
    timemanager.DetectedDayPassed();
}
```

### ğŸ—“ï¸ é€±æœŸå¾ªç’°è¨­è¨ˆ
```
æ˜ŸæœŸå¾ªç’°: 1 â†’ 2 â†’ 3(å‡æœŸ) â†’ 4(å‡æœŸ) â†’ 5 â†’ 6 â†’ 7 â†’ 1
æ™‚æ®µå¾ªç’°: 1 â†’ 2 â†’ 3 â†’ 4 â†’ 5 â†’ 6 â†’ 7 â†’ 8 â†’ 9 â†’ 10 â†’ 1(æ¬¡æ—¥)
```

---

## ğŸ® ç³»çµ±æ•´åˆ

### ğŸ­ èˆ‡åŠ‡æƒ…ç³»çµ±çš„äº¤äº’
```csharp
// EventDetectedManager.cs ä¸­çš„æ™‚é–“ä¾è³´
if (timemanager.aTimer >= 7 && !timemanager.vacation)
{
    // è§¸ç™¼æ™šä¸ŠåŠ‡æƒ…
}
```

**æ•´åˆé»**:
- ä¸åŒæ™‚æ®µè§¸ç™¼ä¸åŒåŠ‡æƒ…å…§å®¹
- å‡æœŸç‹€æ…‹å½±éŸ¿åŠ‡æƒ…é¸é …
- ç‰¹å®šå¤©æ•¸è§¸ç™¼å¼·åˆ¶åŠ‡æƒ…

### ğŸ¯ èˆ‡éŠæˆ²ç®¡ç†ç³»çµ±çš„äº¤äº’
```csharp
// GameManagerTest.cs ä¸­çš„æ™‚é–“æ§åˆ¶
public void TimePassCheck()
{
    if (timemanager.aTimer >= 10)
    {
        timemanager.DetectedDayPassed();
    }
}
```

**æ•´åˆé»**:
- æ™‚é–“æ¨é€²é©…å‹•éŠæˆ²ç‹€æ…‹è®ŠåŒ–
- å‡æœŸç‹€æ…‹å½±éŸ¿è§’è‰²å¤–è§€
- æ™‚æ®µè®ŠåŒ–è§¸ç™¼èƒŒæ™¯åˆ‡æ›

### ğŸ–¼ï¸ èˆ‡UIç³»çµ±çš„äº¤äº’
```csharp
// SexyButton.cs ä¸­çš„æ™‚é–“ä¾è³´
if (timemanager.vacation && otherConditions)
{
    buttonText = "å‡æœŸæ¨¡å¼";
}
```

**æ•´åˆé»**:
- å‡æœŸç‹€æ…‹å½±éŸ¿UIé¡¯ç¤º
- æ™‚é–“ç‹€æ…‹æ§åˆ¶äº’å‹•é¸é …
- æ™‚æ®µè®ŠåŒ–æ›´æ–°ä»‹é¢å…ƒç´ 

---

## ğŸ“Š ç‰¹å®šäº‹ä»¶è§¸ç™¼è¡¨

### ğŸ¯ å¤©æ•¸è§¸ç™¼äº‹ä»¶
| å¤©æ•¸ | è§¸ç™¼æ¢ä»¶ | äº‹ä»¶é¡å‹ |
|------|----------|----------|
| 3, 6 | å¼·åˆ¶è§¸ç™¼ | åŠ‡æƒ…äº‹ä»¶ |
| 15, 24 | aTimer >= 6 | æ¢ä»¶åŠ‡æƒ… |
| 32 | aTimer <= 3 | æ—©æœŸåŠ‡æƒ… |
| 37, 45 | å¼·åˆ¶è§¸ç™¼ | åŠ‡æƒ…äº‹ä»¶ |
| 47, 49 | aTimer >= 6 | æ¢ä»¶åŠ‡æƒ… |
| 51 | å¼·åˆ¶è§¸ç™¼ | åŠ‡æƒ…äº‹ä»¶ |

### ğŸ• æ™‚æ®µè§¸ç™¼äº‹ä»¶
| æ™‚æ®µ | æ¢ä»¶ | è§¸ç™¼å…§å®¹ |
|------|------|----------|
| 7 | éå‡æœŸ | åŠ‡æƒ…äº‹ä»¶æª¢æŸ¥ |
| 8 | éå–®ç¨ç‹€æ…‹ | ç‰¹æ®Šå°è©± |
| >= 10 | ä»»ä½•ç‹€æ…‹ | æ—¥æœŸæ¨é€² |

---

## ğŸ’¾ å­˜æª”ç³»çµ±æ•´åˆ

### ğŸ“‹ æ™‚é–“æ•¸æ“šæŒä¹…åŒ–
```csharp
// NumericalRecords.cs ä¸­çš„å­˜æª”é‚è¼¯
PlayerPrefs.SetInt("aDay", aDay);
PlayerPrefs.SetInt("aTimer", aTimer);
PlayerPrefs.SetInt("aWeek", aWeek);
```

### ğŸ” æ•¸æ“šé©—è­‰æ©Ÿåˆ¶
```csharp
// è¼‰å…¥æ™‚çš„æ•¸æ“šé©—è­‰
if (aWeek == 0 || aWeek == 8) aWeek = 1;
if (aDay == 0) aDay = 1;
if (aTimer <= 0) aTimer = 1;
```

---

## âš¡ æ€§èƒ½è€ƒé‡

### ğŸš€ å„ªåŒ–ç‰¹é»
- **è¼•é‡ç´šè¨­è¨ˆ**: åƒ…ç®¡ç†æ ¸å¿ƒæ™‚é–“è®Šæ•¸
- **äº‹ä»¶é©…å‹•**: é¿å…ä¸å¿…è¦çš„Updateå¾ªç’°
- **ç‹€æ…‹ç·©å­˜**: vacationç‹€æ…‹é¿å…é‡è¤‡è¨ˆç®—

### ğŸ“ˆ æ“´å±•æ€§
- æ™‚é–“è®Šæ•¸é€éNumericalRecordsçµ±ä¸€ç®¡ç†
- äº‹ä»¶è§¸ç™¼æ©Ÿåˆ¶æ”¯æ´éˆæ´»æ“´å±•
- ç‹€æ…‹åˆ¤æ–·é‚è¼¯å¯ç¨ç«‹ä¿®æ”¹

---

## ğŸ›  é™¤éŒ¯å·¥å…·

### ğŸ” æ™‚é–“ç‹€æ…‹æª¢æŸ¥
```csharp
// é™¤éŒ¯ç”¨çš„æ™‚é–“ç‹€æ…‹é¡¯ç¤º
Debug.Log($"Day: {aDay}, Timer: {aTimer}, Week: {aWeek}, Vacation: {vacation}");
```

### ğŸ“Š äº‹ä»¶è§¸ç™¼è¿½è¹¤
```csharp
// äº‹ä»¶è§¸ç™¼æ—¥èªŒ
Debug.Log($"Event triggered at Day {aDay}, Timer {aTimer}");
```

---

## ğŸ”§ å¸¸è¦‹å•é¡Œ

### â“ æ™‚é–“æ¨é€²ç•°å¸¸
**å•é¡Œ**: æ™‚é–“ä¸æ­£å¸¸æ¨é€²
**æª¢æŸ¥**:
- NumericalRecords æ˜¯å¦æ­£ç¢ºåˆå§‹åŒ–
- DetectedDayPassed() æ˜¯å¦è¢«æ­£ç¢ºå‘¼å«
- æ™‚é–“è®Šæ•¸æ˜¯å¦è¶…å‡ºæœ‰æ•ˆç¯„åœ

### â“ äº‹ä»¶è§¸ç™¼å¤±æ•ˆ
**å•é¡Œ**: æ™‚é–“ç›¸é—œäº‹ä»¶ä¸è§¸ç™¼
**æª¢æŸ¥**:
- å‡æœŸç‹€æ…‹åˆ¤æ–·æ˜¯å¦æ­£ç¢º
- æ™‚æ®µæ¢ä»¶æ˜¯å¦æ»¿è¶³
- GameManagerTest ä¸­çš„äº‹ä»¶æª¢æŸ¥é‚è¼¯

### â“ å‡æœŸç‹€æ…‹éŒ¯èª¤
**å•é¡Œ**: å‡æœŸç‹€æ…‹é¡¯ç¤ºä¸æ­£ç¢º
**æª¢æŸ¥**:
- VacationDetected() æ˜¯å¦åœ¨é©ç•¶æ™‚æ©Ÿå‘¼å«
- DetectedPeriod() æ˜¯å¦éœ€è¦å•Ÿç”¨
- é€±æ•¸å’Œæ™‚æ®µè®Šæ•¸æ˜¯å¦æ­£ç¢ºæ›´æ–°

---

## ğŸ“ é–‹ç™¼å»ºè­°

### ğŸ¯ æœ€ä½³å¯¦è¸
1. **æ™‚é–“è®Šæ•¸ä¿®æ”¹**: çµ±ä¸€é€é TimeManagerTest æ–¹æ³•ä¿®æ”¹
2. **äº‹ä»¶è§¸ç™¼**: åœ¨ GameManagerTest ä¸­é›†ä¸­ç®¡ç†
3. **ç‹€æ…‹æª¢æŸ¥**: ä½¿ç”¨ vacation æ¨™èªŒè€Œéç›´æ¥è¨ˆç®—
4. **æ•¸æ“šé©—è­‰**: è¼‰å…¥æ™‚é€²è¡Œé‚Šç•Œæª¢æŸ¥

### ğŸ”„ æ“´å±•å»ºè­°
1. **äº‹ä»¶ç³»çµ±**: è€ƒæ…®æ•´åˆ EventBus é€²è¡Œæ™‚é–“äº‹ä»¶å»£æ’­
2. **æ™‚é–“é¡¯ç¤º**: å¢åŠ æ™‚é–“æ ¼å¼åŒ–å’Œæœ¬åœ°åŒ–æ”¯æ´
3. **é™¤éŒ¯å·¥å…·**: å»ºç«‹æ™‚é–“ç®¡ç†çš„é™¤éŒ¯ä»‹é¢
4. **æ€§èƒ½å„ªåŒ–**: è€ƒæ…®æ™‚é–“äº‹ä»¶çš„å°è±¡æ± ç®¡ç†

---

## ğŸ’¬ Claude ä½¿ç”¨æç¤º

### ğŸ” ç†è§£æ™‚é–“ç³»çµ±
1. **å…ˆäº†è§£æ™‚é–“è®Šæ•¸**: aDay, aTimer, aWeek çš„å«ç¾©å’Œç¯„åœ
2. **æŒæ¡äº‹ä»¶è§¸ç™¼**: ç ”ç©¶ GameManagerTest ä¸­çš„æ™‚é–“æª¢æŸ¥é‚è¼¯
3. **ç†è§£ç‹€æ…‹æ§åˆ¶**: vacation ç‹€æ…‹å¦‚ä½•å½±éŸ¿å…¶ä»–ç³»çµ±

### ğŸ›  ä¿®æ”¹æ™‚é–“ç³»çµ±
1. **ä¿®æ”¹å‰å‚™ä»½**: æ™‚é–“ç³»çµ±å½±éŸ¿å»£æ³›ï¼Œä¿®æ”¹å‰å‹™å¿…å‚™ä»½
2. **æ¸¬è©¦å®Œæ•´æ€§**: ç¢ºä¿æ™‚é–“æ¨é€²ã€äº‹ä»¶è§¸ç™¼ã€ç‹€æ…‹åˆ¤æ–·éƒ½æ­£å¸¸
3. **æ›´æ–°æ–‡ä»¶**: ä¿®æ”¹å¾Œæ›´æ–°æœ¬æ–‡ä»¶å’Œç›¸é—œç³»çµ±æ–‡ä»¶

### ğŸ¯ å¸¸è¦‹ä»»å‹™
- **æ·»åŠ æ–°äº‹ä»¶**: åœ¨ GameManagerTest ä¸­æ·»åŠ æ™‚é–“æ¢ä»¶åˆ¤æ–·
- **ä¿®æ”¹æ™‚é–“æµç¨‹**: èª¿æ•´ DetectedDayPassed() ä¸­çš„é‚è¼¯
- **æ“´å±•å‡æœŸç³»çµ±**: ä¿®æ”¹ VacationDetected() å’Œ DetectedPeriod()

---

**æœ€å¾Œæ›´æ–°**: 2025-07-15  
**ç‰ˆæœ¬**: 1.0  
**ç¶­è­·è€…**: é–‹ç™¼åœ˜éšŠ + Claude AI