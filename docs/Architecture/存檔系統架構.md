# ğŸ’¾ å­˜æª”ç³»çµ±æ¶æ§‹

> LoveTide çš„JSONé©…å‹•å­˜æª”ç®¡ç†ã€å¤šæ§½ä½æ”¯æ´å’Œé€²åº¦æŒä¹…åŒ–æ¶æ§‹è¨­è¨ˆ

---

## ğŸ¯ æ¦‚è¿°

å­˜æª”ç³»çµ±è² è²¬ç®¡ç†éŠæˆ²é€²åº¦çš„æŒä¹…åŒ–å­˜å„²ï¼Œæ”¯æ´æœ€å¤š6å€‹ç¨ç«‹å­˜æª”æ§½ä½ï¼Œæ¡ç”¨JSONæ ¼å¼é€²è¡Œæ•¸æ“šå­˜å„²ã€‚ç³»çµ±å¾åŸæœ¬çš„PlayerPrefsæ¶æ§‹å‡ç´šç‚ºJSONé©…å‹•ï¼Œæä¾›æ›´éˆæ´»çš„æ•¸æ“šç®¡ç†å’Œæ›´å¥½çš„ç‰ˆæœ¬æ§åˆ¶æ”¯æ´ã€‚

---

## âš ï¸ é‡è¦æ¶æ§‹è½‰æ›èªªæ˜

### ğŸ“‹ èˆŠç‰ˆæ¶æ§‹å•é¡Œ
**ç›®å‰å¯¦ç¾**: åŸºæ–¼ PlayerPrefs çš„åˆ†æ•£å¼å­˜æª”
```csharp
// âŒ èˆŠç‰ˆå•é¡Œï¼šæ•¸æ“šåˆ†æ•£åœ¨å¤šå€‹PlayerPrefséµå€¼ä¸­
PlayerPrefs.SetInt("GameDataNumber", slotNumber);           // ç•¶å‰å­˜æª”æ§½
PlayerPrefs.SetString("playerNameData" + slotNumber, name); // ç©å®¶åç¨±
PlayerPrefs.SetInt("FDS_LV", friendshipLevel);             // å¥½æ„Ÿåº¦ç­‰ç´š
PlayerPrefs.SetInt("currentDay", day);                     // éŠæˆ²å¤©æ•¸
PlayerPrefs.SetInt("currentTime", time);                   // ç•¶å‰æ™‚é–“
// ... æ›´å¤šåˆ†æ•£çš„æ•¸æ“š
```

### ğŸ¯ JSONé©…å‹•å„ªå‹¢
**æœªä¾†ç›®æ¨™**: çµ±ä¸€çš„JSONå­˜æª”æ¶æ§‹
```json
// âœ… çµ±ä¸€å­˜æª”ï¼šæ‰€æœ‰æ•¸æ“šé›†ä¸­åœ¨ä¸€å€‹JSONæª”æ¡ˆä¸­
{
  "slotInfo": {
    "slotNumber": 1,
    "createdDate": "2025-07-29",
    "lastPlayedDate": "2025-07-29",
    "playTime": "02:45:30"
  },
  "gameProgress": {
    "currentChapter": 3,
    "currentScene": 5,
    "mainStoryProgress": "beach_date_completed"
  },
  "playerData": {
    "playerName": "ç©å®¶åç¨±",
    "friendship": 750,
    "slutty": 25,
    "lust": 12
  }
}
```

---

## ğŸ—ï¸ å­˜æª”ç³»çµ±æ¶æ§‹è¨­è¨ˆ

### ğŸ“Š 6æ§½ä½å­˜æª”ç®¡ç†çµæ§‹
```
ğŸ’¾ å­˜æª”ç³»çµ±æ¶æ§‹
â”‚
â”œâ”€â”€ ğŸ“ SaveDataManager (å­˜æª”ç®¡ç†å™¨)
â”‚   â”œâ”€â”€ ğŸ¯ å¤šæ§½ä½ç®¡ç† (1-6 å€‹å­˜æª”æ§½ä½)
â”‚   â”œâ”€â”€ ğŸ“Š è‡ªå‹•å­˜æª”æ©Ÿåˆ¶
â”‚   â”œâ”€â”€ ğŸ”„ è®€å–/å¯«å…¥æ§åˆ¶
â”‚   â””â”€â”€ ğŸ›¡ï¸ æ•¸æ“šé©—è­‰èˆ‡å‚™ä»½
â”‚
â”œâ”€â”€ ğŸ“„ å­˜æª”æª”æ¡ˆçµæ§‹
â”‚   â”œâ”€â”€ SaveSlot_1.json (å­˜æª”æ§½ 1)
â”‚   â”œâ”€â”€ SaveSlot_2.json (å­˜æª”æ§½ 2)
â”‚   â”œâ”€â”€ SaveSlot_3.json (å­˜æª”æ§½ 3)
â”‚   â”œâ”€â”€ SaveSlot_4.json (å­˜æª”æ§½ 4)
â”‚   â”œâ”€â”€ SaveSlot_5.json (å­˜æª”æ§½ 5)
â”‚   â”œâ”€â”€ SaveSlot_6.json (å­˜æª”æ§½ 6)
â”‚   â””â”€â”€ SaveSettings.json (å­˜æª”è¨­å®š)
â”‚
â””â”€â”€ ğŸ”— ç³»çµ±æ•´åˆ
    â”œâ”€â”€ ğŸ® ProgressDetector (é€²åº¦åµæ¸¬å™¨)
    â”œâ”€â”€ ğŸ“Š JsonDataManager (JSONæ•¸æ“šç®¡ç†)
    â”œâ”€â”€ ğŸ­ GameManager (éŠæˆ²ç®¡ç†å™¨)
    â””â”€â”€ ğŸ¨ UI SaveLoadManager (å­˜è®€æª”ä»‹é¢)
```

---

## ğŸ“‹ JSONå­˜æª”æ•¸æ“šçµæ§‹è¨­è¨ˆ

### ğŸ’¾ å®Œæ•´å­˜æª”çµæ§‹ (SaveSlot_X.json)
```json
{
  "saveInfo": {
    "slotNumber": 1,
    "isActive": true,
    "createdDate": "2025-07-29T10:30:00",
    "lastPlayedDate": "2025-07-29T15:45:30",
    "totalPlayTime": "12:30:45",
    "gameVersion": "1.0.0",
    "saveDescription": "æµ·ç˜ç´„æœƒå¾Œ"
  },
  
  "gameProgress": {
    "currentChapter": 3,
    "currentScene": 5,
    "currentDay": 15,
    "currentTime": 6,
    "currentWeek": 2,
    "mainStoryProgress": "beach_date_completed",
    "unlockedScenes": ["bedroom", "kitchen", "beach", "park"],
    "completedEvents": [1, 2, 3, 15, 23],
    "currentLocation": "bedroom"
  },
  
  "playerData": {
    "playerName": "ç©å®¶æš±ç¨±",
    "characterStats": {
      "friendship": 750,
      "slutty": 25,
      "lust": 12,
      "fdsLevel": 3
    },
    "relationships": {
      "yuka": {
        "affection": 85,
        "trust": 70,
        "intimacy": 45
      }
    }
  },
  
  "gameState": {
    "flags": {
      "hasMetSteve": true,
      "beachDateUnlocked": true,
      "specialEventFlag": false
    },
    "inventory": {
      "items": ["gift_1", "photo_beach"],
      "money": 5000
    },
    "achievements": ["first_date", "beach_lover"],
    "unlockedDialogs": [0, 1, 2, 15, 23, 45]
  },
  
  "systemData": {
    "lastAutoSaveTime": "2025-07-29T15:40:00",
    "preferredLanguage": "zh-TW",
    "audioSettings": {
      "masterVolume": 0.8,
      "bgmVolume": 0.7,
      "sfxVolume": 0.9
    }
  }
}
```

### âš™ï¸ å­˜æª”è¨­å®šçµæ§‹ (SaveSettings.json)
```json
{
  "globalSettings": {
    "autoSaveEnabled": true,
    "autoSaveInterval": 300,
    "maxBackupFiles": 3,
    "compressionEnabled": false
  },
  
  "slotOverview": {
    "1": {
      "isUsed": true,
      "quickInfo": "ç¬¬3ç«  - æµ·ç˜ç´„æœƒå¾Œ",
      "thumbnail": "save_thumb_1.png",
      "lastPlayed": "2025-07-29T15:45:30"
    },
    "2": {
      "isUsed": false,
      "quickInfo": "",
      "thumbnail": "",
      "lastPlayed": ""
    },
    "3": {
      "isUsed": true,
      "quickInfo": "ç¬¬1ç«  - åˆæ¬¡è¦‹é¢",
      "thumbnail": "save_thumb_3.png", 
      "lastPlayed": "2025-07-28T20:15:00"
    },
    "4": { "isUsed": false },
    "5": { "isUsed": false },
    "6": { "isUsed": false }
  }
}
```

---

## ğŸ® SaveDataManager æ ¸å¿ƒå¯¦ç¾

### ğŸ—ï¸ å­˜æª”ç®¡ç†å™¨æ¶æ§‹
```csharp
public class SaveDataManager : MonoBehaviour
{
    [Header("å­˜æª”è¨­å®š")]
    public int maxSaveSlots = 6;
    public bool autoSaveEnabled = true;
    public float autoSaveInterval = 300f; // 5åˆ†é˜
    
    [Header("æª”æ¡ˆè·¯å¾‘")]
    private string saveDataPath;
    private string settingsPath;
    
    [Header("ç•¶å‰ç‹€æ…‹")]
    public int currentSlot = -1;
    public SaveData currentSaveData;
    public SaveSettings saveSettings;
    
    // å–®ä¾‹æ¨¡å¼
    public static SaveDataManager Instance { get; private set; }
    
    void Awake()
    {
        if (Instance == null)
        {
            Instance = this;
            DontDestroyOnLoad(gameObject);
            InitializeSaveSystem();
        }
        else
        {
            Destroy(gameObject);
        }
    }
}
```

### ğŸ’¾ å­˜æª”æ“ä½œæ–¹æ³•
```csharp
public class SaveDataManager : MonoBehaviour
{
    // å‰µå»ºæ–°å­˜æª”
    public bool CreateNewSave(int slotNumber, string playerName)
    {
        if (slotNumber < 1 || slotNumber > maxSaveSlots)
        {
            Debug.LogError($"ç„¡æ•ˆçš„å­˜æª”æ§½ä½: {slotNumber}");
            return false;
        }
        
        // å‰µå»ºæ–°çš„å­˜æª”æ•¸æ“š
        SaveData newSave = CreateDefaultSaveData(slotNumber, playerName);
        
        // å¯«å…¥æª”æ¡ˆ
        return WriteSaveData(slotNumber, newSave);
    }
    
    // è¼‰å…¥å­˜æª”
    public SaveData LoadSaveData(int slotNumber)
    {
        string filePath = GetSaveFilePath(slotNumber);
        
        if (!File.Exists(filePath))
        {
            Debug.LogWarning($"å­˜æª”æª”æ¡ˆä¸å­˜åœ¨: {filePath}");
            return null;
        }
        
        try
        {
            string jsonData = File.ReadAllText(filePath);
            SaveData saveData = JsonUtility.FromJson<SaveData>(jsonData);
            
            // é©—è­‰å­˜æª”æ•¸æ“š
            if (ValidateSaveData(saveData))
            {
                currentSlot = slotNumber;
                currentSaveData = saveData;
                return saveData;
            }
        }
        catch (System.Exception e)
        {
            Debug.LogError($"è¼‰å…¥å­˜æª”å¤±æ•—: {e.Message}");
        }
        
        return null;
    }
    
    // ä¿å­˜å­˜æª”
    public bool SaveCurrentGame()
    {
        if (currentSlot == -1 || currentSaveData == null)
        {
            Debug.LogError("æ²’æœ‰æœ‰æ•ˆçš„å­˜æª”å¯ä»¥ä¿å­˜");
            return false;
        }
        
        // æ›´æ–°ä¿å­˜æ™‚é–“
        currentSaveData.saveInfo.lastPlayedDate = System.DateTime.Now.ToString("yyyy-MM-ddTHH:mm:ss");
        
        // å¾éŠæˆ²ç³»çµ±æ”¶é›†ç•¶å‰æ•¸æ“š
        CollectCurrentGameData();
        
        // å¯«å…¥æª”æ¡ˆ
        return WriteSaveData(currentSlot, currentSaveData);
    }
}
```

### ğŸ” æ•¸æ“šæ”¶é›†èˆ‡é©—è­‰
```csharp
private void CollectCurrentGameData()
{
    // å¾ NumericalRecords æ”¶é›†æ•¸å€¼æ•¸æ“š
    var numericalData = FindObjectOfType<NumericalRecords>();
    if (numericalData != null)
    {
        currentSaveData.playerData.characterStats.friendship = numericalData.friendship;
        currentSaveData.playerData.characterStats.slutty = numericalData.slutty;
        currentSaveData.playerData.characterStats.lust = numericalData.lust;
        currentSaveData.gameProgress.currentDay = numericalData.aDay;
        currentSaveData.gameProgress.currentTime = numericalData.aTimer;
        currentSaveData.gameProgress.currentWeek = numericalData.aWeek;
    }
    
    // å¾ GameManager æ”¶é›†éŠæˆ²ç‹€æ…‹
    var gameManager = FindObjectOfType<GameManagerTest>();
    if (gameManager != null)
    {
        // æ”¶é›†ç•¶å‰å ´æ™¯ã€è§£é–å…§å®¹ç­‰
        currentSaveData.gameProgress.currentLocation = gameManager.currentLocation;
        currentSaveData.gameState.unlockedDialogs = gameManager.unlockedDialogs.ToList();
    }
    
    // æ›´æ–°éŠæˆ²æ™‚é–“
    UpdatePlayTime();
}

private bool ValidateSaveData(SaveData saveData)
{
    // æª¢æŸ¥å¿…è¦æ¬„ä½
    if (saveData == null || saveData.saveInfo == null)
        return false;
        
    if (string.IsNullOrEmpty(saveData.playerData.playerName))
        return false;
        
    // æª¢æŸ¥æ•¸å€¼ç¯„åœ
    if (saveData.gameProgress.currentChapter < 1 || 
        saveData.gameProgress.currentChapter > 10)
        return false;
        
    return true;
}
```

---

## ğŸ”„ è‡ªå‹•å­˜æª”æ©Ÿåˆ¶

### âš¡ è‡ªå‹•å­˜æª”è§¸ç™¼å™¨
```csharp
public class AutoSaveController : MonoBehaviour
{
    [Header("è‡ªå‹•å­˜æª”è¨­å®š")]
    public bool enableAutoSave = true;
    public float autoSaveInterval = 300f; // 5åˆ†é˜
    public List<string> autoSaveTriggers = new List<string>
    {
        "dialog_completed",
        "scene_changed", 
        "day_passed",
        "important_choice_made"
    };
    
    private float lastAutoSaveTime;
    
    void Start()
    {
        // è¨»å†Šäº‹ä»¶ç›£è½
        EventBus.Subscribe("dialog_completed", OnAutoSaveTrigger);
        EventBus.Subscribe("scene_changed", OnAutoSaveTrigger);
        EventBus.Subscribe("day_passed", OnAutoSaveTrigger);
    }
    
    void Update()
    {
        // å®šæ™‚è‡ªå‹•å­˜æª”
        if (enableAutoSave && Time.time - lastAutoSaveTime > autoSaveInterval)
        {
            PerformAutoSave();
        }
    }
    
    private void OnAutoSaveTrigger(EventData eventData)
    {
        if (enableAutoSave)
        {
            PerformAutoSave();
        }
    }
    
    private void PerformAutoSave()
    {
        if (SaveDataManager.Instance != null && SaveDataManager.Instance.currentSlot != -1)
        {
            SaveDataManager.Instance.SaveCurrentGame();
            lastAutoSaveTime = Time.time;
            
            // é¡¯ç¤ºè‡ªå‹•å­˜æª”æç¤º
            ShowAutoSaveNotification();
        }
    }
}
```

---

## ğŸ¨ å­˜æª”ä»‹é¢æ•´åˆ

### ğŸ–¼ï¸ å­˜æª”é¸æ“‡ä»‹é¢
```csharp
public class SaveLoadUI : MonoBehaviour
{
    [Header("UIå…ƒä»¶")]
    public Transform saveSlotContainer;
    public GameObject saveSlotPrefab;
    public Button[] slotButtons = new Button[6];
    
    [Header("å­˜æª”è³‡è¨Šé¡¯ç¤º")]
    public Text selectedSlotInfo;
    public Image selectedSlotThumbnail;
    public Text selectedSlotPlayTime;
    
    private SaveSettings saveSettings;
    
    void Start()
    {
        LoadSaveSettings();
        RefreshSaveSlotDisplay();
    }
    
    public void OnSlotSelected(int slotNumber)
    {
        // æª¢æŸ¥æ§½ä½æ˜¯å¦æœ‰å­˜æª”
        if (IsSaveSlotUsed(slotNumber))
        {
            DisplaySaveSlotInfo(slotNumber);
        }
        else
        {
            DisplayEmptySlotInfo(slotNumber);
        }
    }
    
    public void OnLoadButtonClicked()
    {
        int selectedSlot = GetSelectedSlot();
        if (selectedSlot != -1)
        {
            LoadGameFromSlot(selectedSlot);
        }
    }
    
    public void OnSaveButtonClicked()
    {
        int selectedSlot = GetSelectedSlot();
        if (selectedSlot != -1)
        {
            SaveGameToSlot(selectedSlot);
        }
    }
    
    private void LoadGameFromSlot(int slotNumber)
    {
        SaveData loadedData = SaveDataManager.Instance.LoadSaveData(slotNumber);
        if (loadedData != null)
        {
            // æ‡‰ç”¨å­˜æª”æ•¸æ“šåˆ°éŠæˆ²ç³»çµ±
            ApplySaveDataToGame(loadedData);
            
            // åˆ‡æ›åˆ°éŠæˆ²å ´æ™¯
            SceneManager.LoadScene("GameScene");
        }
    }
}
```

---

## ğŸ”— èˆ‡é€²åº¦åµæ¸¬ç³»çµ±æ•´åˆ

### ğŸ¯ é€²åº¦åµæ¸¬å™¨æ•´åˆ
```csharp
public class ProgressDetector : MonoBehaviour
{
    [Header("å­˜æª”ç³»çµ±æ•´åˆ")]
    public SaveDataManager saveDataManager;
    
    public string DetectRequiredJsonFile()
    {
        // 1. å¾å­˜æª”ç³»çµ±ç²å–ç•¶å‰é€²åº¦
        SaveData currentSave = saveDataManager.currentSaveData;
        if (currentSave == null)
        {
            Debug.LogWarning("æ²’æœ‰æœ‰æ•ˆçš„å­˜æª”æ•¸æ“šï¼Œä½¿ç”¨é è¨­JSON");
            return "DefaultDialog.json";
        }
        
        // 2. åˆ†æéŠæˆ²é€²åº¦
        int currentChapter = currentSave.gameProgress.currentChapter;
        int currentScene = currentSave.gameProgress.currentScene;
        string storyFlag = currentSave.gameProgress.mainStoryProgress;
        int fdsLevel = currentSave.playerData.characterStats.fdsLevel;
        
        // 3. æ ¹æ“šé€²åº¦æ±ºå®šå°è©±æª”æ¡ˆ
        string jsonFileName = DetermineDialogJsonFile(
            currentChapter, 
            currentScene, 
            storyFlag, 
            fdsLevel
        );
        
        return jsonFileName;
    }
    
    private string DetermineDialogJsonFile(int chapter, int scene, string storyFlag, int fdsLevel)
    {
        // æ ¹æ“šå­˜æª”é€²åº¦é¸æ“‡å°æ‡‰çš„å°è©±JSONæª”æ¡ˆ
        if (chapter == 1)
        {
            return $"GrowMode_{fdsLevel}.json";
        }
        else if (chapter >= 2)
        {
            return $"StoryMode_{chapter}_{scene}.json";
        }
        
        return "GrowMode_0.json"; // é è¨­æª”æ¡ˆ
    }
}
```

### ğŸ”„ éŠæˆ²è¼‰å…¥æµç¨‹
```
ğŸ® éŠæˆ²å•Ÿå‹•
    â†“
ğŸ’¾ SaveDataManager åˆå§‹åŒ–
    â”œâ”€â”€ æª¢æŸ¥å­˜æª”æª”æ¡ˆå®Œæ•´æ€§
    â”œâ”€â”€ è¼‰å…¥ SaveSettings.json
    â””â”€â”€ æº–å‚™å­˜æª”ç³»çµ±
    â†“
ğŸ¯ ProgressDetector åˆ†æå­˜æª”
    â”œâ”€â”€ è®€å–ç•¶å‰å­˜æª”é€²åº¦
    â”œâ”€â”€ åˆ†æç« ç¯€ã€å ´æ™¯ã€åŠ‡æƒ…ç‹€æ…‹
    â””â”€â”€ æ±ºå®šè¦è¼‰å…¥çš„å°è©±JSONæª”æ¡ˆ
    â†“
ğŸ“Š JsonDataManager è¼‰å…¥å°è©±æ•¸æ“š
    â”œâ”€â”€ æ ¹æ“šé€²åº¦åµæ¸¬çµæœè¼‰å…¥æŒ‡å®šJSON
    â”œâ”€â”€ è§£æå°è©±å…§å®¹
    â””â”€â”€ æº–å‚™å°è©±æ•¸æ“šä¾›éŠæˆ²ä½¿ç”¨
    â†“
ğŸ­ GameManager é–‹å§‹éŠæˆ²
    â”œâ”€â”€ æ‡‰ç”¨å­˜æª”ä¸­çš„éŠæˆ²ç‹€æ…‹
    â”œâ”€â”€ åˆå§‹åŒ–å„ç³»çµ±æ•¸å€¼
    â””â”€â”€ é–‹å§‹éŠæˆ²ä¸»å¾ªç’°
```

---

## ğŸ›¡ï¸ æ•¸æ“šå®‰å…¨èˆ‡å‚™ä»½

### ğŸ” å­˜æª”ä¿è­·æ©Ÿåˆ¶
```csharp
public class SaveDataProtection : MonoBehaviour
{
    [Header("å‚™ä»½è¨­å®š")]
    public int maxBackupFiles = 3;
    public bool enableDataEncryption = false;
    
    // å‰µå»ºå­˜æª”å‚™ä»½
    public void CreateSaveBackup(int slotNumber)
    {
        string originalPath = GetSaveFilePath(slotNumber);
        string backupPath = GetBackupFilePath(slotNumber, DateTime.Now);
        
        if (File.Exists(originalPath))
        {
            File.Copy(originalPath, backupPath);
            CleanupOldBackups(slotNumber);
        }
    }
    
    // é©—è­‰å­˜æª”å®Œæ•´æ€§
    public bool ValidateSaveIntegrity(int slotNumber)
    {
        try
        {
            SaveData saveData = LoadSaveData(slotNumber);
            return ValidateSaveData(saveData);
        }
        catch
        {
            return false;
        }
    }
    
    // æ¢å¾©å­˜æª”å‚™ä»½
    public bool RestoreFromBackup(int slotNumber)
    {
        string[] backupFiles = GetAvailableBackups(slotNumber);
        
        foreach (string backupFile in backupFiles.OrderByDescending(f => f))
        {
            try
            {
                SaveData backupData = LoadSaveDataFromPath(backupFile);
                if (ValidateSaveData(backupData))
                {
                    // æ¢å¾©å‚™ä»½
                    string originalPath = GetSaveFilePath(slotNumber);
                    File.Copy(backupFile, originalPath, true);
                    return true;
                }
            }
            catch (Exception e)
            {
                Debug.LogWarning($"å‚™ä»½æ¢å¾©å¤±æ•—: {e.Message}");
                continue;
            }
        }
        
        return false;
    }
}
```

---

## ğŸ“Š å­˜æª”ç³»çµ±æ•ˆèƒ½å„ªåŒ–

### âš¡ ç•°æ­¥å­˜æª”æ“ä½œ
```csharp
public class AsyncSaveManager : MonoBehaviour
{
    private Queue<SaveOperation> saveQueue = new Queue<SaveOperation>();
    private bool isSaving = false;
    
    public async Task<bool> SaveGameAsync(int slotNumber, SaveData saveData)
    {
        SaveOperation operation = new SaveOperation
        {
            slotNumber = slotNumber,
            saveData = saveData,
            timestamp = DateTime.Now
        };
        
        saveQueue.Enqueue(operation);
        
        if (!isSaving)
        {
            return await ProcessSaveQueue();
        }
        
        return true;
    }
    
    private async Task<bool> ProcessSaveQueue()
    {
        isSaving = true;
        
        while (saveQueue.Count > 0)
        {
            SaveOperation operation = saveQueue.Dequeue();
            
            try
            {
                // ç•°æ­¥å¯«å…¥æª”æ¡ˆ
                await WriteFileAsync(operation);
                
                // æ›´æ–°UIé¡¯ç¤º
                UpdateSaveSlotDisplay(operation.slotNumber);
            }
            catch (Exception e)
            {
                Debug.LogError($"ç•°æ­¥å­˜æª”å¤±æ•—: {e.Message}");
                isSaving = false;
                return false;
            }
        }
        
        isSaving = false;
        return true;
    }
    
    private async Task WriteFileAsync(SaveOperation operation)
    {
        string jsonData = JsonUtility.ToJson(operation.saveData, true);
        string filePath = GetSaveFilePath(operation.slotNumber);
        
        // ç•°æ­¥å¯«å…¥
        await File.WriteAllTextAsync(filePath, jsonData);
    }
}
```

---

## ğŸ”§ é–‹ç™¼å»ºè­°

### ğŸ’¡ å¯¦ä½œæŒ‡å°
1. **å¾PlayerPrefsé·ç§»**: å»ºç«‹å°æ‡‰é—œä¿‚è¡¨ï¼Œé€æ­¥å°‡æ•¸æ“šé·ç§»åˆ°JSON
2. **å­˜æª”æ§½ä½ç®¡ç†**: å¯¦ç¾6å€‹ç¨ç«‹æ§½ä½çš„å®Œæ•´ç®¡ç†
3. **è‡ªå‹•å­˜æª”**: åœ¨é—œéµæ™‚æ©Ÿé»è‡ªå‹•è§¸ç™¼å­˜æª”
4. **æ•¸æ“šé©—è­‰**: ç¢ºä¿å­˜æª”æ•¸æ“šçš„å®Œæ•´æ€§å’Œæ­£ç¢ºæ€§

### âš ï¸ æ³¨æ„äº‹é …
- **æª”æ¡ˆè·¯å¾‘**: ä½¿ç”¨ `Application.persistentDataPath` ç¢ºä¿è·¨å¹³å°å…¼å®¹
- **æ•¸æ“šå¤§å°**: ç›£æ§å­˜æª”æª”æ¡ˆå¤§å°ï¼Œé¿å…éå¤§å½±éŸ¿æ•ˆèƒ½
- **éŒ¯èª¤è™•ç†**: å®Œå–„çš„ç•°å¸¸è™•ç†æ©Ÿåˆ¶ï¼Œé˜²æ­¢å­˜æª”æå£
- **å‘å¾Œå…¼å®¹**: è€ƒæ…®èˆŠç‰ˆå­˜æª”çš„å…¼å®¹æ€§å•é¡Œ

### ğŸ¯ æ¸¬è©¦è¦é»
- **å¤šæ§½ä½åˆ‡æ›**: æ¸¬è©¦6å€‹æ§½ä½çš„ç¨ç«‹æ€§
- **è‡ªå‹•å­˜æª”**: é©—è­‰è‡ªå‹•å­˜æª”çš„è§¸ç™¼æ™‚æ©Ÿ
- **æ•¸æ“šå®Œæ•´æ€§**: ç¢ºä¿å­˜è®€æª”å¾Œæ•¸æ“šä¸€è‡´
- **ç•°å¸¸æ¢å¾©**: æ¸¬è©¦å­˜æª”æå£æ™‚çš„å‚™ä»½æ¢å¾©

---

## ğŸ”— ç›¸é—œæ¶æ§‹æ–‡ä»¶å°è¦½

### ğŸ“Š å­˜æª”ç³»çµ±æ•´åˆç›¸é—œ
- **ğŸ¯ é€²åº¦åµæ¸¬**: [`æ•¸æ“šæµæ¶æ§‹.md`](./æ•¸æ“šæµæ¶æ§‹.md) - å¦‚ä½•æ ¹æ“šå­˜æª”æ±ºå®šè¼‰å…¥çš„JSON
- **ğŸ® éŠæˆ²ç®¡ç†**: [`éŠæˆ²æµç¨‹æ¶æ§‹.md`](./éŠæˆ²æµç¨‹æ¶æ§‹.md) - å­˜æª”èˆ‡éŠæˆ²æµç¨‹çš„æ•´åˆ
- **ğŸ’¬ å°è©±ç³»çµ±**: [`TextBoxå°è©±ç³»çµ±.md`](./TextBoxå°è©±ç³»çµ±.md) - å­˜æª”å°å°è©±ç³»çµ±çš„å½±éŸ¿
- **ğŸ¨ UIæ•´åˆ**: [`UIæ¶æ§‹è¨­è¨ˆ.md`](./UIæ¶æ§‹è¨­è¨ˆ.md) - å­˜è®€æª”ä»‹é¢è¨­è¨ˆ

### ğŸ”„ æ•¸æ“šæµæ•´åˆé—œéµ
- **å­˜æª”å‰µå»º** â†’ åˆå§‹åŒ–æ‰€æœ‰éŠæˆ²æ•¸æ“š
- **å­˜æª”è¼‰å…¥** â†’ æ‡‰ç”¨æ•¸æ“šåˆ°å„éŠæˆ²ç³»çµ±  
- **è‡ªå‹•å­˜æª”** â†’ å®šæœŸä¿å­˜éŠæˆ²é€²åº¦
- **é€²åº¦åµæ¸¬** â†’ æ ¹æ“šå­˜æª”é¸æ“‡å°è©±å…§å®¹

---

## ğŸ’¬ Claude ä½¿ç”¨æç¤º

### ğŸ¯ å­˜æª”ç³»çµ±é–‹ç™¼é‡é»
1. **6æ§½ä½ç®¡ç†**: ç¢ºä¿æ¯å€‹æ§½ä½çš„ç¨ç«‹æ€§å’Œå®Œæ•´æ€§
2. **JSONæ ¼å¼**: çµ±ä¸€ä½¿ç”¨JSONæ ¼å¼æ›¿ä»£PlayerPrefs
3. **é€²åº¦æ•´åˆ**: èˆ‡ProgressDetectorç·Šå¯†æ•´åˆ
4. **è‡ªå‹•å­˜æª”**: åœ¨é©ç•¶æ™‚æ©Ÿè‡ªå‹•è§¸ç™¼å­˜æª”

### ğŸ›  é–‹ç™¼æµç¨‹å»ºè­°
1. **å»ºç«‹åŸºç¤çµæ§‹** â†’ å…ˆå¯¦ç¾SaveDataManagerå’ŒåŸºæœ¬JSONçµæ§‹
2. **å¯¦ç¾å­˜è®€æª”** â†’ å®Œå–„å­˜æª”å’Œè¼‰å…¥åŠŸèƒ½
3. **æ•´åˆç¾æœ‰ç³»çµ±** â†’ å°‡NumericalRecordsç­‰ç³»çµ±æ•¸æ“šæ•´åˆé€²å­˜æª”
4. **é€²åº¦åµæ¸¬æ•´åˆ** â†’ èˆ‡ProgressDetectorå»ºç«‹é€£æ¥

### âš ï¸ ç‰¹åˆ¥æ³¨æ„
- **æ•¸æ“šé·ç§»**: å¾PlayerPrefsé·ç§»æ™‚è¦ä¿æŒå‘å¾Œå…¼å®¹
- **æª”æ¡ˆå®‰å…¨**: å¯¦ç¾å‚™ä»½å’Œæ¢å¾©æ©Ÿåˆ¶
- **æ•ˆèƒ½è€ƒé‡**: å¤§å­˜æª”çš„ç•°æ­¥è™•ç†
- **UIæ•´åˆ**: æä¾›å‹å¥½çš„å­˜è®€æª”ä»‹é¢

---

**æœ€å¾Œæ›´æ–°**: 2025-07-29  
**ç‰ˆæœ¬**: 1.0 (JSONé©…å‹•å­˜æª”ç³»çµ±)  
**ç¶­è­·è€…**: é–‹ç™¼åœ˜éšŠ + Claude AI

> ğŸ’¾ **æ ¸å¿ƒæé†’**: å­˜æª”ç³»çµ±æ˜¯é€²åº¦åµæ¸¬çš„åŸºç¤ï¼Œç¢ºä¿å­˜æª”æ•¸æ“šçš„å®Œæ•´æ€§å’Œæ­£ç¢ºæ€§å°æ•´å€‹éŠæˆ²çš„ç©©å®šé‹è¡Œè‡³é—œé‡è¦ã€‚é–‹ç™¼æ™‚è«‹å„ªå…ˆè€ƒæ…®æ•¸æ“šå®‰å…¨å’Œç”¨æˆ¶é«”é©—ã€‚