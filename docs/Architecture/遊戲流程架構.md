# ğŸ® éŠæˆ²æµç¨‹æ¶æ§‹

> LoveTide éŠæˆ²çš„æ•´é«”æµç¨‹æ§åˆ¶èˆ‡å ´æ™¯ç®¡ç†æ¶æ§‹

---

## ğŸ¯ æ¦‚è¿°

éŠæˆ²æµç¨‹æ¶æ§‹è² è²¬ç®¡ç†å¾å•Ÿå‹•åˆ°çµæŸçš„å®Œæ•´éŠæˆ²é«”é©—ï¼ŒåŒ…æ‹¬å ´æ™¯åˆ‡æ›ã€ç‹€æ…‹ç®¡ç†ã€é€²åº¦ä¿å­˜ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚

---

## ğŸ§± æµç¨‹æ¨¡çµ„çµæ§‹

### ğŸ“Š ä¸»è¦æµç¨‹ç®¡ç†å™¨
- **GameManagerTest.cs**: ä¸»éŠæˆ²é‚è¼¯æ§åˆ¶å™¨
  - å ´æ™¯ç‹€æ…‹ç®¡ç†
  - éŠæˆ²é€²åº¦æ§åˆ¶
  - ç³»çµ±åˆå§‹åŒ–
  - å­˜æª”/è¼‰å…¥å”èª¿

### ğŸ­ å ´æ™¯æ§åˆ¶å™¨
- **BackgroundCtrl.cs**: èƒŒæ™¯å ´æ™¯æ§åˆ¶
  - éœæ…‹èƒŒæ™¯åˆ‡æ›
  - Spine å‹•ç•«èƒŒæ™¯
  - å ´æ™¯éæ¸¡æ•ˆæœ
  - ç’°å¢ƒæ°›åœæ§åˆ¶

---

## ğŸ”„ éŠæˆ²ç‹€æ…‹æ©Ÿ

### ğŸ“‹ ä¸»è¦éŠæˆ²ç‹€æ…‹
```csharp
public enum GameState
{
    Initialize,    // åˆå§‹åŒ–
    MainMenu,      // ä¸»é¸å–®
    Loading,       // è¼‰å…¥ä¸­
    Playing,       // éŠæˆ²ä¸­
    Dialog,        // å°è©±ä¸­
    MiniGame,      // å°éŠæˆ²
    Paused,        // æš«åœ
    Settings,      // è¨­å®š
    Saving         // å­˜æª”ä¸­
}
```

### ğŸ¯ ç‹€æ…‹è½‰æ›é‚è¼¯
```
Initialize â†’ MainMenu â†’ Loading â†’ Playing
    â†“           â†“         â†“        â†“
Settings â†â”€â”€â”€ Settings â†â”€ Settings â†â”€ Dialog
    â†“           â†“         â†“        â†“
MainMenu â†â”€â”€â”€ Loading â†â”€ Paused â†â”€ MiniGame
```

---

## ğŸ¬ éŠæˆ²å•Ÿå‹•æµç¨‹

### ğŸ“± å•Ÿå‹•åºåˆ—
1. **ç³»çµ±åˆå§‹åŒ–**
   - Unity å¼•æ“åˆå§‹åŒ–
   - è³‡æºç³»çµ±è¼‰å…¥
   - éŸ³æ•ˆç³»çµ±å•Ÿå‹•
   - UI ç³»çµ±åˆå§‹åŒ–

2. **éŠæˆ²æ•¸æ“šè¼‰å…¥**
   - è®€å–éŠæˆ²è¨­å®š
   - è¼‰å…¥ç©å®¶å­˜æª”
   - åˆå§‹åŒ–éŠæˆ²æ•¸æ“š
   - æª¢æŸ¥ç‰ˆæœ¬å…¼å®¹æ€§

3. **ä¸»é¸å–®é¡¯ç¤º**
   - é¡¯ç¤ºä¸»é¸å–®ä»‹é¢
   - æ’­æ”¾èƒŒæ™¯éŸ³æ¨‚
   - è¼‰å…¥ä¸»é¸å–®èƒŒæ™¯
   - ç­‰å¾…ç©å®¶æ“ä½œ

### ğŸ® ä¸»é¸å–®åŠŸèƒ½
```csharp
public class MainMenuController : MonoBehaviour
{
    public void StartNewGame();     // é–‹å§‹æ–°éŠæˆ²
    public void LoadGame();         // è¼‰å…¥éŠæˆ²
    public void OpenSettings();     // æ‰“é–‹è¨­å®š
    public void QuitGame();         // é€€å‡ºéŠæˆ²
}
```

---

## ğŸ  ä¸»éŠæˆ²æµç¨‹

### ğŸ¯ éŠæˆ²å¾ªç’°
```
å ´æ™¯è¼‰å…¥ â†’ è§’è‰²åˆå§‹åŒ– â†’ ç­‰å¾…ç©å®¶æ“ä½œ â†’ è™•ç†é¸æ“‡ â†’ æ›´æ–°éŠæˆ²ç‹€æ…‹ â†’ å„²å­˜é€²åº¦
    â†‘                                                                    â†“
å ´æ™¯åˆ‡æ› â†â”€â”€â”€ è§¸ç™¼æ¢ä»¶æª¢æŸ¥ â†â”€â”€â”€ UIæ›´æ–° â†â”€â”€â”€ å‹•ç•«æ’­æ”¾ â†â”€â”€â”€ é‚è¼¯è™•ç† â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ“… æ—¥å¸¸äº’å‹•æµç¨‹
1. **æ™‚é–“æ®µé¸æ“‡**
   - é¡¯ç¤ºç•¶å‰æ™‚é–“
   - åˆ—å‡ºå¯ç”¨æ´»å‹•
   - ç©å®¶é¸æ“‡æ´»å‹•
   - æª¢æŸ¥æ´»å‹•æ¢ä»¶

2. **æ´»å‹•åŸ·è¡Œ**
   - è¼‰å…¥æ´»å‹•å ´æ™¯
   - æ’­æ”¾é–‹å ´å‹•ç•«
   - é€²å…¥æ´»å‹•é‚è¼¯
   - è¨ˆç®—æ´»å‹•çµæœ

3. **çµæœè™•ç†**
   - æ›´æ–°éŠæˆ²æ•¸æ“š
   - é¡¯ç¤ºçµæœåé¥‹
   - æª¢æŸ¥è§£é–æ¢ä»¶
   - è‡ªå‹•å­˜æª”

---

## ğŸ­ åŠ‡æƒ…æµç¨‹æ¶æ§‹

### ğŸ“ åŠ‡æƒ…è§¸ç™¼æ©Ÿåˆ¶
```csharp
public class StoryTrigger
{
    public int storyId;                    // åŠ‡æƒ…ID
    public List<Condition> conditions;     // è§¸ç™¼æ¢ä»¶
    public StoryType storyType;           // åŠ‡æƒ…é¡å‹
    public bool isRepeatable;             // æ˜¯å¦å¯é‡è¤‡
}
```

### ğŸª åŠ‡æƒ…æ’­æ”¾æµç¨‹
1. **è§¸ç™¼æª¢æŸ¥**
   - æª¢æŸ¥è§¸ç™¼æ¢ä»¶
   - é©—è­‰å‰ç½®åŠ‡æƒ…
   - ç¢ºèªè§’è‰²ç‹€æ…‹
   - æª¢æŸ¥æ™‚é–“é™åˆ¶

2. **åŠ‡æƒ…åŸ·è¡Œ**
   - è¼‰å…¥åŠ‡æƒ…æ•¸æ“š
   - åˆ‡æ›å ´æ™¯èƒŒæ™¯
   - æ’­æ”¾è§’è‰²å‹•ç•«
   - é¡¯ç¤ºå°è©±å…§å®¹

3. **é¸æ“‡åˆ†æ”¯**
   - é¡¯ç¤ºé¸é …åˆ—è¡¨
   - ç­‰å¾…ç©å®¶é¸æ“‡
   - è¨˜éŒ„é¸æ“‡çµæœ
   - å½±éŸ¿å¾ŒçºŒåŠ‡æƒ…

---

## ğŸ® å°éŠæˆ²æ•´åˆæµç¨‹

### ğŸ¯ å°éŠæˆ²å•Ÿå‹•
```csharp
public class MiniGameManager : MonoBehaviour
{
    public void StartMiniGame(MiniGameType gameType)
    {
        // 1. ä¿å­˜ç•¶å‰éŠæˆ²ç‹€æ…‹
        // 2. åˆ‡æ›åˆ°å°éŠæˆ²å ´æ™¯
        // 3. åˆå§‹åŒ–å°éŠæˆ²æ•¸æ“š
        // 4. é–‹å§‹å°éŠæˆ²å¾ªç’°
    }
}
```

### ğŸ† å°éŠæˆ²çµæŸæµç¨‹
1. **çµæœè¨ˆç®—**
   - è¨ˆç®—éŠæˆ²åˆ†æ•¸
   - åˆ¤å®šæˆåŠŸå¤±æ•—
   - è¨ˆç®—çå‹µå…§å®¹
   - æ›´æ–°çµ±è¨ˆæ•¸æ“š

2. **çå‹µç™¼æ”¾**
   - å¢åŠ é‡‘éŒ¢æ”¶å…¥
   - æå‡æŠ€èƒ½ç¶“é©—
   - è§£é–æ–°å…§å®¹
   - è¨˜éŒ„æˆå°±é€²åº¦

3. **è¿”å›ä¸»éŠæˆ²**
   - æ¢å¾©éŠæˆ²ç‹€æ…‹
   - åˆ‡æ›å›ä¸»å ´æ™¯
   - é¡¯ç¤ºçµæœæ‘˜è¦
   - ç¹¼çºŒéŠæˆ²æµç¨‹

---

## ğŸ’¾ å­˜æª”ç³»çµ±æ•´åˆ

### ğŸ“‹ è‡ªå‹•å­˜æª”æ™‚æ©Ÿ
- **åŠ‡æƒ…ç¯€é»**: é‡è¦åŠ‡æƒ…å®Œæˆå¾Œ
- **æ—¥æœŸè®ŠåŒ–**: æ¯æ—¥çµæŸæ™‚
- **é¸æ“‡å®Œæˆ**: é‡è¦é¸æ“‡å¾Œ
- **å°éŠæˆ²çµæŸ**: å°éŠæˆ²å®Œæˆå¾Œ
- **è¨­å®šè®Šæ›´**: éŠæˆ²è¨­å®šä¿®æ”¹å¾Œ

### ğŸ”„ å­˜æª”æ•¸æ“šçµæ§‹
```csharp
public class GameSaveData
{
    // éŠæˆ²é€²åº¦
    public int currentDay;
    public string currentScene;
    public int storyProgress;
    
    // è§’è‰²æ•¸æ“š
    public Dictionary<string, int> characterAffection;
    public Dictionary<string, bool> unlockedContent;
    
    // éŠæˆ²æ•¸æ“š
    public int playerMoney;
    public Dictionary<string, int> playerStats;
    public List<string> completedStories;
}
```

---

## ğŸµ éŸ³æ•ˆç³»çµ±æ•´åˆ

### ğŸ”Š éŸ³æ•ˆè§¸ç™¼æ™‚æ©Ÿ
- **å ´æ™¯åˆ‡æ›**: è‡ªå‹•æ’­æ”¾å°æ‡‰BGM
- **åŠ‡æƒ…æ’­æ”¾**: æ ¹æ“šåŠ‡æƒ…å…§å®¹æ’­æ”¾éŸ³æ•ˆ
- **UIæ“ä½œ**: æŒ‰éˆ•é»æ“Šç­‰æ“ä½œéŸ³æ•ˆ
- **å°éŠæˆ²**: éŠæˆ²å°ˆç”¨éŸ³æ•ˆå’ŒéŸ³æ¨‚

### ğŸ¶ éŸ³æ•ˆç®¡ç†ç­–ç•¥
```csharp
public class AudioIntegration
{
    public void OnSceneChanged(string sceneName)
    {
        // æ ¹æ“šå ´æ™¯åˆ‡æ›BGM
        audioManager.PlayBGM(GetSceneBGM(sceneName));
    }
    
    public void OnStoryEvent(string eventType)
    {
        // æ ¹æ“šåŠ‡æƒ…äº‹ä»¶æ’­æ”¾éŸ³æ•ˆ
        audioManager.PlaySFX(GetStorySound(eventType));
    }
}
```

---

## ğŸ”§ ç³»çµ±ç›£æ§èˆ‡é™¤éŒ¯

### ğŸ“Š æ€§èƒ½ç›£æ§
- **FPSç›£æ§**: å¯¦æ™‚é¡¯ç¤ºéŠæˆ²å¹€ç‡
- **è¨˜æ†¶é«”ä½¿ç”¨**: ç›£æ§è¨˜æ†¶é«”æ¶ˆè€—
- **è¼‰å…¥æ™‚é–“**: è¨˜éŒ„å ´æ™¯è¼‰å…¥æ™‚é–“
- **ç”¨æˆ¶è¡Œç‚º**: è¿½è¹¤ç©å®¶æ“ä½œæ¨¡å¼

### ğŸ›  é™¤éŒ¯å·¥å…·
```csharp
public class DebugManager : MonoBehaviour
{
    [Header("Debug Options")]
    public bool showFPS;
    public bool showMemoryUsage;
    public bool enableCheatMode;
    
    public void SkipToStory(int storyId);
    public void AddMoney(int amount);
    public void SetAffection(string character, int value);
}
```

---

## ğŸ”Œ æ“´å±•æ€§è€ƒé‡

### ğŸ§© æ¨¡çµ„åŒ–è¨­è¨ˆ
- **å ´æ™¯æ¨¡çµ„**: ç¨ç«‹çš„å ´æ™¯ç®¡ç†
- **åŠ‡æƒ…æ¨¡çµ„**: å¯æ’æ‹”çš„åŠ‡æƒ…ç³»çµ±
- **å°éŠæˆ²æ¨¡çµ„**: æ¨™æº–åŒ–çš„å°éŠæˆ²ä»‹é¢
- **å­˜æª”æ¨¡çµ„**: çµ±ä¸€çš„æ•¸æ“šæŒä¹…åŒ–

### ğŸ¯ æœªä¾†æ“´å±•
- **å¤šèªè¨€æ”¯æ´**: æœ¬åœ°åŒ–æµç¨‹æ•´åˆ
- **é›²ç«¯å­˜æª”**: é›²ç«¯åŒæ­¥åŠŸèƒ½
- **æ›´æ–°ç³»çµ±**: å…§å®¹æ›´æ–°æ©Ÿåˆ¶
- **åˆ†æç³»çµ±**: ç”¨æˆ¶è¡Œç‚ºåˆ†æ

---

---

## ğŸ†• **æ–°ç³»çµ±æ•´åˆï¼šäº’å‹•ç®¡ç†æ¶æ§‹**

> âš ï¸ **æ¶æ§‹æ›´æ–°**: ä»¥ä¸‹æ˜¯é‡å°é‡è£½å ´æ™¯çš„æ–°äº’å‹•ç³»çµ±æ•´åˆæ–¹æ¡ˆ

### ğŸ—ï¸ **ç®¡ç†å™¨è·è²¬åˆ†å·¥**

#### ğŸ® **GameManagerTest - éŠæˆ²å¤§ç¸½ç®¡**
```csharp
// æœ€é«˜å±¤ç´šçš„éŠæˆ²æ§åˆ¶å™¨
public class GameManagerTest : MonoBehaviour
{
    [Header("æ ¸å¿ƒè·è²¬")]
    // ğŸ¯ éŠæˆ²ç‹€æ…‹çµ±ç±Œ
    public GameState currentGameState;
    
    // ğŸ“… éŠæˆ²é€²åº¦ç®¡ç†  
    public int currentDay;
    public int storyProgress;
    
    // ğŸ”„ å ´æ™¯åˆ‡æ›å”èª¿
    public void ChangeScene(string sceneName);
    
    // ğŸ’¾ å­˜æª”è¼‰å…¥å”èª¿
    public void SaveGame();
    public void LoadGame(SaveData data);
    
    // â° æ™‚é–“ç³»çµ±ç®¡ç†
    public TimeManagerTest timeManager;
    
    // ğŸ­ äº‹ä»¶ç³»çµ±å”èª¿
    public void OnTalkEvent(int dialogId);
    public void TriggerMiniGame(MiniGameType gameType);
    
    // ğŸ†• èˆ‡æ–°äº’å‹•ç³»çµ±çš„æ•´åˆ
    public void NotifyInteractionStateChange(GameState newState);
}
```

#### ğŸ¨ **GameUICtrlmanager - UI ç¸½æ§åˆ¶å™¨**
```csharp
// UI å±¤ç´šçš„çµ±ä¸€ç®¡ç†
public class GameUICtrlmanager : MonoBehaviour
{
    [Header("Canvas å±¤ç´šç®¡ç†")]
    public Canvas backgroundCanvas;      // Order: 0 - èƒŒæ™¯å ´æ™¯
    public Canvas staticInteractionCanvas;  // Order: 40 - å ´æ™¯ç‰©ä»¶äº’å‹• (æ–°å¢)
    public Canvas dynamicCharacterCanvas;   // Order: 50 - ç§»å‹•è§’è‰²äº’å‹• (æ–°å¢)
    public Canvas gameUICanvas;          // Order: 60 - åŸæœ‰ UI
    public Canvas dialogCanvas;          // Order: 70 - å°è©±ç³»çµ±
    public Canvas menuCanvas;            // Order: 80 - é¸å–®ç³»çµ±
    public Canvas popupCanvas;           // Order: 90 - å½ˆçª—ç³»çµ±
    
    [Header("æ–°äº’å‹•ç³»çµ±æ•´åˆ")]
    public InteractionManager interactionManager;  // ğŸ†• æ–°å¢
    
    // ğŸª é¢æ¿é¡¯ç¤ºæ§åˆ¶
    public void DisplaySettings(bool isOpen);
    
    // ğŸ†• æ–°å¢ï¼šäº’å‹•ç³»çµ±åˆå§‹åŒ–
    public void InitializeInteractionSystems();
}
```

#### ğŸ†• **InteractionManager - äº’å‹•çµ±ä¸€ç®¡ç†å™¨**
```csharp
// æ–°å¢çš„äº’å‹•ç³»çµ±æ ¸å¿ƒ
public class InteractionManager : MonoBehaviour
{
    [Header("äº’å‹•è·¯ç”±ç³»çµ±")]
    public DynamicCharacterInteraction characterInteraction;
    public StaticObjectInteraction sceneInteraction;
    public SmartInteractionManager smartManager;
    
    [Header("Canvas å¼•ç”¨")]
    public Canvas dynamicCharacterCanvas;
    public Canvas staticInteractionCanvas;
    
    // ğŸ¯ çµ±ä¸€çš„é»æ“Šè™•ç†å…¥å£
    public void HandleInteractionClick(InteractionType type, InteractionData data);
    
    // ğŸ”„ æ ¹æ“šéŠæˆ²ç‹€æ…‹èª¿æ•´äº’å‹•
    public void UpdateInteractionStates(GameState currentState);
    
    // ğŸ“Š äº’å‹•å„ªå…ˆç´šç®¡ç†
    public void SetInteractionPriority(InteractionType type, int priority);
}
```

### ğŸ”„ **ç³»çµ±æ•´åˆæµç¨‹**

#### ğŸ“Š **æ¶æ§‹å±¤ç´šåœ–**
```
ğŸ® GameManagerTest (éŠæˆ²å¤§ç¸½ç®¡)
    â”œâ”€â”€ ğŸ¯ éŠæˆ²ç‹€æ…‹æ§åˆ¶ (Playing, Dialog, MiniGame)
    â”œâ”€â”€ ğŸ“… é€²åº¦ç®¡ç† (currentDay, storyProgress)
    â”œâ”€â”€ ğŸ”„ å ´æ™¯åˆ‡æ›å”èª¿ (ChangeScene)
    â”œâ”€â”€ ğŸ’¾ å­˜æª”è¼‰å…¥å”èª¿ (SaveGame, LoadGame)
    â””â”€â”€ â° æ™‚é–“ç³»çµ±ç®¡ç† (TimeManagerTest)
    
ğŸ¨ GameUICtrlmanager (UI ç¸½æ§åˆ¶)
    â”œâ”€â”€ ğŸ“± Canvas å±¤ç´šç®¡ç† (7å±¤ Canvas)
    â”œâ”€â”€ ğŸª é¢æ¿é¡¯ç¤ºæ§åˆ¶ (å„ç¨® UI é¢æ¿)
    â”œâ”€â”€ âš™ï¸ è¨­å®šé¸å–®ç®¡ç† (éŸ³é‡ã€èªè¨€ç­‰)
    â””â”€â”€ ğŸ†• InteractionManager (æ–°äº’å‹•ç³»çµ±)
    
ğŸ†• InteractionManager (äº’å‹•çµ±ä¸€ç®¡ç†)
    â”œâ”€â”€ ğŸš¶â€â™€ï¸ DynamicCharacterInteraction (ç§»å‹•è§’è‰²)
    â”œâ”€â”€ ğŸ  StaticObjectInteraction (å ´æ™¯ç‰©ä»¶)
    â”œâ”€â”€ ğŸ§  SmartInteractionManager (æ™ºèƒ½ç®¡ç†)
    â””â”€â”€ âœ¨ CharacterInteractionFeedback (è¦–è¦ºåé¥‹)
    
ğŸ“Š æ•¸æ“šç®¡ç†å±¤
    â”œâ”€â”€ ğŸ’° NumericalRecords (æ•¸å€¼è¨˜éŒ„)
    â”œâ”€â”€ ğŸ’¾ SaveDataManager (å­˜æª”ç®¡ç†)
    â””â”€â”€ â° TimeManagerTest (æ™‚é–“ç®¡ç†)
```

#### ğŸ¯ **æ•¸æ“šæµå‘è¨­è¨ˆ**
```
ç©å®¶æ“ä½œ â†’ InteractionManager (çµ±ä¸€æ¥æ”¶)
    â†“
é»æ“Šå„ªå…ˆç´šåˆ¤æ–· (è§’è‰² > UI > å ´æ™¯)
    â†“
åˆ†ç™¼çµ¦å°æ‡‰è™•ç†å™¨
    â”œâ”€â”€ ğŸš¶â€â™€ï¸ DynamicCharacterInteraction â†’ PlayerActorTest
    â”œâ”€â”€ ğŸ  StaticObjectInteraction â†’ å ´æ™¯é‚è¼¯
    â””â”€â”€ ğŸ¨ UI ç›´æ¥è™•ç†
    â†“
æ•¸æ“šæ›´æ–° (NumericalRecords)
    â†“
ç‹€æ…‹é€šçŸ¥ (GameManagerTest)
    â†“
å¾ŒçºŒé‚è¼¯ (åŠ‡æƒ…ã€éŸ³æ•ˆã€å­˜æª”ç­‰)
```

### ğŸ“± **æ›´æ–°å¾Œçš„ Canvas åˆ†å±¤**

#### ğŸ—ï¸ **æ–°çš„ Canvas æ¶æ§‹**
```csharp
// GameUICtrlmanager ç®¡ç†çš„å®Œæ•´ Canvas å±¤ç´š
public class CanvasLayerManager : MonoBehaviour
{
    [Header("Canvas åˆ†å±¤æ¶æ§‹")]
    
    // èƒŒæ™¯å±¤ (æœ€åº•å±¤)
    [SerializeField] Canvas backgroundCanvas;        // Order: 0
    
    // ğŸ†• äº’å‹•å±¤ (æ–°å¢)
    [SerializeField] Canvas staticInteractionCanvas; // Order: 40 - å ´æ™¯ç‰©ä»¶äº’å‹•
    [SerializeField] Canvas dynamicCharacterCanvas;  // Order: 50 - ç§»å‹•è§’è‰²äº’å‹•
    
    // UI å±¤
    [SerializeField] Canvas gameUICanvas;            // Order: 60 - éŠæˆ² HUD
    [SerializeField] Canvas dialogCanvas;            // Order: 70 - å°è©±ç³»çµ±
    [SerializeField] Canvas menuCanvas;              // Order: 80 - é¸å–®ç³»çµ±
    [SerializeField] Canvas popupCanvas;             // Order: 90 - å½ˆçª—ç³»çµ±
    
    void Start()
    {
        InitializeCanvasLayers();
        InitializeInteractionSystems(); // ğŸ†• æ–°å¢
    }
    
    // ğŸ†• æ–°å¢ï¼šåˆå§‹åŒ–äº’å‹•ç³»çµ±
    void InitializeInteractionSystems()
    {
        var interactionManager = GetComponent<InteractionManager>();
        interactionManager.Initialize(dynamicCharacterCanvas, staticInteractionCanvas);
    }
}
```

### ğŸ® **éŠæˆ²ç‹€æ…‹æ•´åˆ**

#### ğŸ”„ **ç‹€æ…‹è®ŠåŒ–è™•ç†**
```csharp
// GameManagerTest ä¸­çš„ç‹€æ…‹ç®¡ç†å¢å¼·
public class GameManagerTest : MonoBehaviour
{
    [Header("æ–°å¢ï¼šäº’å‹•ç³»çµ±æ•´åˆ")]
    public GameUICtrlmanager uiManager;
    
    // ğŸ†• å¢å¼·çš„ç‹€æ…‹åˆ‡æ›
    public void SetGameState(GameState newState)
    {
        var oldState = currentGameState;
        currentGameState = newState;
        
        // é€šçŸ¥ UI ç®¡ç†å™¨ç‹€æ…‹è®ŠåŒ–
        uiManager.OnGameStateChanged(oldState, newState);
        
        // ğŸ†• é€šçŸ¥äº’å‹•ç³»çµ±ç‹€æ…‹è®ŠåŒ–
        uiManager.interactionManager?.UpdateInteractionStates(newState);
        
        // è§¸ç™¼ç‹€æ…‹è®ŠåŒ–äº‹ä»¶
        EventBus.Instance.Publish("GameStateChanged", newState);
    }
}
```

### ğŸ”§ **ç³»çµ±æ•´åˆç­–ç•¥**

#### ğŸ“‹ **æ•´åˆåŸå‰‡**
- **æœ€å°ä¾µå…¥** - æ–°ç³»çµ±ä½œç‚º GameUICtrlmanager çš„å­æ¨¡çµ„
- **æ–°èˆŠä¸¦å­˜** - èˆŠç³»çµ±åœ¨ç¾æœ‰å ´æ™¯ç¹¼çºŒä½¿ç”¨
- **æ¼¸é€²é·ç§»** - é‡è£½å ´æ™¯å„ªå…ˆä½¿ç”¨æ–°ç³»çµ±
- **å‘å¾Œå…¼å®¹** - ç¢ºä¿ç¾æœ‰åŠŸèƒ½ä¸å—å½±éŸ¿

#### ğŸš€ **å¯¦æ–½æ­¥é©Ÿ**
1. **éšæ®µä¸€**: åœ¨ GameUICtrlmanager ä¸‹å»ºç«‹ InteractionManager
2. **éšæ®µäºŒ**: æ›´æ–° Canvas åˆ†å±¤æ¶æ§‹
3. **éšæ®µä¸‰**: å¯¦ç¾æ–°çš„äº’å‹•é‚è¼¯
4. **éšæ®µå››**: æ•´åˆç¾æœ‰ç³»çµ±ä¸¦æ¸¬è©¦

#### âš ï¸ **æ³¨æ„äº‹é …**
- **ç³»çµ±åˆ†é›¢** - æ–°èˆŠç³»çµ±æ˜ç¢ºåˆ†é›¢ï¼Œé¿å…è¡çª
- **ç‹€æ…‹åŒæ­¥** - ç¢ºä¿å„ç®¡ç†å™¨ç‹€æ…‹åŒæ­¥
- **æ€§èƒ½è€ƒé‡** - æ–°å¢çš„ Update() è¨ˆç®—è¦å„ªåŒ–
- **é™¤éŒ¯æ”¯æ´** - æä¾›å®Œæ•´çš„é™¤éŒ¯å’Œç›£æ§åŠŸèƒ½

---

## ğŸ’¬ Claude ä½¿ç”¨æç¤º

### ğŸ” **èˆŠç³»çµ±ç¶­è­·**
äº†è§£éŠæˆ²æµç¨‹æ¶æ§‹æ™‚è«‹ï¼š
1. å…ˆç†è§£æ•´é«”ç‹€æ…‹æ©Ÿè¨­è¨ˆ
2. é—œæ³¨å„ç³»çµ±é–“çš„å”ä½œæ–¹å¼
3. æ³¨æ„å­˜æª”å’Œè¼‰å…¥çš„æ™‚æ©Ÿ
4. ç†è§£å ´æ™¯åˆ‡æ›çš„é‚è¼¯
5. æ­é…é–±è®€ `CodeModules/GameManagerTest.md` äº†è§£å¯¦ä½œç´°ç¯€

### ğŸ†• **æ–°ç³»çµ±é–‹ç™¼**
é–‹ç™¼æ–°äº’å‹•ç³»çµ±æ™‚è«‹ï¼š
1. **æ¶æ§‹ç†è§£** - å…ˆç†è§£ç®¡ç†å™¨è·è²¬åˆ†å·¥
2. **Canvas å±¤ç´š** - åš´æ ¼æŒ‰ç…§æ–°çš„ Canvas åˆ†å±¤è¨­è¨ˆ
3. **ç‹€æ…‹ç®¡ç†** - ç¢ºä¿èˆ‡ GameManagerTest ç‹€æ…‹åŒæ­¥
4. **ç³»çµ±æ•´åˆ** - éµå¾ªæœ€å°ä¾µå…¥åŸå‰‡
5. **æ¸¬è©¦é©—è­‰** - ç¢ºä¿æ–°èˆŠç³»çµ±ä¸äº’ç›¸å¹²æ“¾

### ğŸ”„ **ç³»çµ±é¸æ“‡**
- **èˆŠç³»çµ±é©ç”¨**: ç¾æœ‰å ´æ™¯ç¶­è­·ã€å¿«é€ŸåŠŸèƒ½ä¿®å¾©
- **æ–°ç³»çµ±é©ç”¨**: é‡è£½å ´æ™¯ã€éœ€è¦ç§»å‹•è§’è‰²äº’å‹•
- **æ•´åˆé–‹ç™¼**: éœ€è¦åŒæ™‚ç†è§£å…©å¥—æ¶æ§‹çš„å·®ç•°å’Œè¯ç¹«

ä¿®æ”¹æµç¨‹æ¶æ§‹æ™‚éœ€è¦ï¼š
- ç¢ºä¿ç‹€æ…‹è½‰æ›çš„æ­£ç¢ºæ€§
- è€ƒæ…®å‘å¾Œå…¼å®¹æ€§
- æ¸¬è©¦å„ç¨®é‚Šç•Œæƒ…æ³
- æ›´æ–°ç›¸é—œçš„ç³»çµ±æ–‡ä»¶
- ğŸ†• **æ–°å¢**: é©—è­‰æ–°èˆŠç³»çµ±çš„å”èª¿å·¥ä½œ